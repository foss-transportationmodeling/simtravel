<ProjectConfig>
  <Project name="mag_zone_dynamic" location="/home/karthik/simtravel/test/mag_zone_dynamic/" seed="10" iteration="3" subsample="40000"/>
  <DTAConnection value="True"/>
  <DBConfig dbprotocol="postgres" dbhost="localhost" dbname="mag_zone_dynamic" dbusername="postgres" dbpassword="1234"/>

  <TravelSkims reference_tablename="travel_skims" indb="True">
    <Period tablename="travel_skims_0" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="0" intervalEnd="59" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim0.dat" delimiter=","/>
    <Period tablename="travel_skims_1" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="60" intervalEnd="119" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim1.dat" delimiter=","/>
    <Period tablename="travel_skims_2" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="120" intervalEnd="179" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim2.dat" delimiter=","/>
    <Period tablename="travel_skims_3" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="180" intervalEnd="239" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim3.dat" delimiter=","/>
    <Period tablename="travel_skims_4" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="240" intervalEnd="299" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim4.dat" delimiter=","/>
    <Period tablename="travel_skims_5" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="300" intervalEnd="359" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim5.dat" delimiter=","/>
    <Period tablename="travel_skims_6" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="360" intervalEnd="419" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim6.dat" delimiter=","/>
    <Period tablename="travel_skims_7" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="420" intervalEnd="479" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim7.dat" delimiter=","/>
    <Period tablename="travel_skims_8" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="480" intervalEnd="539" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim8.dat" delimiter=","/>
    <Period tablename="travel_skims_9" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="540" intervalEnd="599" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim9.dat" delimiter=","/>
    <Period tablename="travel_skims_10" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="600" intervalEnd="659" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim10.dat" delimiter=","/>
    <Period tablename="travel_skims_11" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="660" intervalEnd="719" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim11.dat" delimiter=","/>
    <Period tablename="travel_skims_12" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="720" intervalEnd="779" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim12.dat" delimiter=","/>
    <Period tablename="travel_skims_13" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="780" intervalEnd="839" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim13.dat" delimiter=","/>
    <Period tablename="travel_skims_14" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="840" intervalEnd="899" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim14.dat" delimiter=","/>
    <Period tablename="travel_skims_15" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="900" intervalEnd="959" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim15.dat" delimiter=","/>
    <Period tablename="travel_skims_16" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="960" intervalEnd="1019" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim16.dat" delimiter=","/>
    <Period tablename="travel_skims_17" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="1020" intervalEnd="1079" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim17.dat" delimiter=","/>
    <Period tablename="travel_skims_18" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="1080" intervalEnd="1139" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim18.dat" delimiter=","/>
    <Period tablename="travel_skims_19" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="1140" intervalEnd="1199" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim19.dat" delimiter=","/>
    <Period tablename="travel_skims_20" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="1200" intervalEnd="1259" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim20.dat" delimiter=","/>
    <Period tablename="travel_skims_21" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="1260" intervalEnd="1319" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim21.dat" delimiter=","/>
    <Period tablename="travel_skims_22" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="1320" intervalEnd="1379" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim22.dat" delimiter=","/>
    <Period tablename="travel_skims_23" origin_var="origin" destination_var="destination" skim_var="tt" intervalStart="1380" intervalEnd="1439" fileLocation="/home/karthik/simtravel/test/mag_zone_dynamic/skimOutput/dynamic/skim23.dat" delimiter=","/>

  </TravelSkims>

  <Locations reference_tablename="locations" tablename="locations" location_var="locationid" indb="True">
    <LocationVariable var="retail_employment"/>

    <LocationVariable var="retail_employment_density"/>
    <LocationVariable var="other_employment_density"/>
    <LocationVariable var="office_employment_density"/>

    <LocationVariable var="total_area"/>

    <LocationVariable var="low_income"/>
    <LocationVariable var="high_income"/>
  </Locations>

  <ModelConfig>

    <Component name="VehicleOwnershipModel" read_from_table="households_vehicles_count_r" skip="False" completed="True">
      <DBTables>
        <Table table="households" key="houseid" order="1"/>
        <Table table="households_vehicles_count_r" key="houseid"/>
      </DBTables>
      <Model name="VehCount" formulation="Ordered" type="Probit" seed="1">
      	<!-- TODO: Model Needs to be Updated-->
        <DependentVariable var="vehcount"/>
        <Filter table="households" var="houseid" condition="greater than" value="0"/>
        <Alternative id="Alt 0" value="0"/>
        <Alternative id="Alt 1" value="1" threshold="0"/>
        <Alternative id="Alt 2" value="2" threshold="2.36"/>
        <Alternative id="Alt 3" value="3" threshold="4.18"/>
        <Alternative id="Alt 4" value="4" threshold="5.28"/>
        <Variable table="standard" var="one" coeff="-0.07"/>
        <Variable table="households" var="noc" coeff="0.05"/>
        <Variable table="households" var="drvrcnt" coeff="1.34"/>
        <Variable table="households" var="homeown" coeff="0.77"/>
        <Variable table="households" var="inclt35k" coeff="-0.51"/>
        <Variable table="households" var="urb" coeff="-0.16"/>
      </Model>

      <Model name="VehDeficiency" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="vehdefi"/>
        <Variance value="0"/>
        <Filter table="runtime" var="vehcount" condition="less than" valuetable="households" valuevar="numadlt"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>

      <Model name="avratio" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="avratio"/>
        <Variance value="0"/>
        <Variable table="runtime,households" var="vehcount,numadlt" coeff="1" inverse="False,True" interaction="True"/>
      </Model>


    </Component>

    <Component name="VehicleAttributeModels" read_from_table="vehicles_r" skip="False" completed="True">
      <DBTables>
        <Table table="households" key="houseid" order="1"/>
        <Table table="households_vehicles_count_r" key="houseid"/>
        <Table table="vehicles_r" key="houseid" count_key="vehid"/>
      </DBTables>
      <DeleteRecords value="False"/>
      <Model name="Vehtype" formulation="Multinomial Logit" type="Alternative Specific" seed="1">
      	<!-- TODO: Model Needs to be Updated-->
        <DependentVariable var="vehtype"/>
        <FilterSet type="and"/>
        <Filter table="households_vehicles_count_r" var="vehcount" condition="greater than" value="0"/>
        <Filter table="runtime" var="vehid" condition="less than" valuetable="households_vehicles_count_r" valuevar="vehcount"/>
        <RunUntilCondition table="runtime" var="vehid" condition="less than" valuetable="households_vehicles_count_r" valuevar="vehcount"/>
        <Alternative id="Car" value="1">
          <Variable table="standard" var="one" coeff="1.65"/>
          <Variable table="households" var="noc" coeff="-.20"/>
          <Variable table="households" var="drvrcnt" coeff="-0.09"/>
          <Variable table="households" var="homeown" coeff="-0.52"/>
          <Variable table="households" var="urb" coeff="0.24"/>
        </Alternative>
        <Alternative id="Van" value="2">
          <Variable table="standard" var="one" coeff="-0.69"/>
          <Variable table="households" var="noc" coeff="0.29"/>
          <Variable table="households" var="drvrcnt" coeff="-0.11"/>
          <Variable table="households" var="homeown" coeff="-0.30"/>
          <Variable table="households" var="inclt35k" coeff="0.16"/>
          <Variable table="households" var="urb" coeff="0.18"/>
        </Alternative>
        <Alternative id="SUV" value="3">
          <Variable table="standard" var="one" coeff="0.18"/>
          <Variable table="households" var="inclt35k" coeff="-0.55"/>
        </Alternative>
        <Alternative id="PTruck" value="4">
          <Variable table="standard" var="one" coeff="0.0"/>
        </Alternative>
      </Model>
      <Model name="UpdateConditionVariable" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="vehid"/>
        <FilterSet type="and"/>
        <Filter table="households_vehicles_count_r" var="vehcount" condition="greater than" value="0"/>
        <Filter table="runtime" var="vehid" condition="less than" valuetable="households_vehicles_count_r" valuevar="vehcount"/>
        <Filter table="households" var="houseid" condition="greater than" value="0"/>
        <RunUntilCondition table="runtime" var="vehid" condition="less than" valuetable="households_vehicles_count_r" valuevar="vehcount"/>
        <Variance value="0"/>
        <Variable table="runtime" var="max_vehid" coeff="1"/>
        <Variable table="runtime" var="vehid" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
    </Component>

    <Component name="WorkEpisodes" read_from_table="workers_r" key="houseid,personid" skip="False" completed="True">
      <!-- TODO:Model Not Updated-->
      <DBTables>
        <Table table="persons" key="houseid,personid" order="1"/>
        <Table table="workers_r" key="houseid,personid"/>
      </DBTables>
      <Model name="NumEpisodes" formulation="Probability Distribution" seed="1">
      	<!-- TODO: Model Needs to be Updated-->
        <DependentVariable var="episodes"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="persons" var="houseid" condition="greater than" value="0"/>
        <Alternative id="One" value="1">
          <Variable table="standard" var="one" coeff="0.75"/>
        </Alternative>
        <Alternative id="Two" value="2">
          <Variable table="standard" var="one" coeff="0.25"/>
        </Alternative>
      </Model>
    </Component>

    <Component name="FixedActivityEpisodes1PrismsWorkers" read_from_table="schedule_r" key="houseid,personid" skip="False" completed="True">
      <DBTables>
        <Table table="persons" key="houseid,personid" order="1"/>
        <Table table="households" key="houseid" order="2"/>
        <Table table="households_vehicles_count_r" key="houseid"/>
        <Table table="vehicles_r" key="houseid" count_key="vehid"/>
        <Table table="workers_r" key="houseid,personid"/>
        <Table table="schedule_r" key="houseid,personid"/>
      </DBTables>
      <DeleteRecords value="True"/>
      <SpatialConstraints table="travel_skims" skim_var="tt" as_var="timetowk" origin_var="origin" destination_var="destination">
        <Start table="households" location_var="htaz"/>
        <End table="persons" location_var="wtaz"/>
      </SpatialConstraints>
      <Model name="Iteration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="iterations"/>
        <Variance value="0"/>
        <Variable table="runtime" var="iterations" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
      </Model>
      <Model name="ActivityType" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="activitytype"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="1"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="200"/>
      </Model>
      <Model name="LocationID" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="locationid"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="1"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Variance value="0"/>
        <Variable table="persons" var="wtaz" coeff="1"/>
      </Model>
      <Model name="starttime" formulation="Regression" type="Stochastic Frontier" vertex="start" lower_threshold="104" upper_threshold="719" seed="1">
	<!-- Model Updated-->
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="1"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than" value="10"/>
        <Variance value="1719.15131"/>
        <Variance value="68612.84820" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="64.746458"/>
        <Variable table="households" var="noc" coeff="1.50101485"/>
        <Variable table="households" var="urb" coeff="6.52846019"/>
        <Variable table="persons" var="female" coeff="20.0675064"/>
        <Variable table="persons" var="parttim" coeff="54.2339420"/>
        <Variable table="persons" var="coled" coeff="25.4058431"/>
        <Variable table="persons" var="ag18t24" coeff="45.1458527"/>
        <Variable table="persons" var="ag45t54" coeff="-6.76935367"/>
        <Variable table="persons" var="ag55t64" coeff="-9.05949383"/>
        <Variable table="persons" var="agge65" coeff="5.61830556"/>
      </Model>
      <Model name="EndTime" formulation="Regression" type="Stochastic Frontier" vertex="end" lower_threshold="415" upper_threshold="1035" seed="1">
	<!-- Model Updated-->
        <DependentVariable var="endtime"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="1"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than" value="10"/>
        <Variance value="18218.03005"/>
        <Variance value="37796.32964" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="833.799796"/>
        <Variable table="households" var="noc" coeff="-16.5273648"/>
        <Variable table="households" var="sparent" coeff="-41.8596502"/>
        <Variable table="households" var="urb" coeff="16.5201464"/>
        <Variable table="households" var="incge50k" coeff="-14.1585081"/>
        <Variable table="persons" var="female" coeff="-8.44361574"/>
        <Variable table="households" var="hhsize" coeff="8.32017964"/>
        <Variable table="persons" var="fulltim" coeff="40.8563461"/>
        <Variable table="runtime" var="timetowk" coeff=".48162975"/>
        <Variable table="persons" var="ag18t24" coeff="116.858927"/>
        <Variable table="persons" var="ag35t44" coeff="9.93878198"/>
        <Variable table="persons" var="ag55t64" coeff="-10.7259428"/>
        <Variable table="persons" var="agge65" coeff="-19.1087486"/>
      </Model>

      <Model name="starttime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="1"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="runtime" var="iterations" condition="equals" value="10"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="104"/>
      </Model>
      <Model name="EndTime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="endtime"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="1"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="runtime" var="iterations" condition="equals" value="10"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1035"/>
      </Model>
      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="duration"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="1"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="TripCount" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tripcount"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="DummyModelforCaching" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="dependentpersonid"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="1"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="runtime" var="duration" condition="greater than" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
    </Component>

    <Component name="FixedActivity2Episodes1PrismsWorkers" read_from_table="schedule_r" key="houseid,personid" skip="False" completed="True">
      <DBTables>
        <Table table="persons" key="houseid,personid" order="1"/>
        <Table table="households" key="houseid" order="2"/>
        <Table table="households_vehicles_count_r" key="houseid"/>
        <Table table="vehicles_r" key="houseid" count_key="vehid"/>
        <Table table="workers_r" key="houseid,personid"/>
        <Table table="schedule_r" key="houseid,personid"/>
      </DBTables>
      <DeleteRecords value="True"/>
      <SpatialConstraints table="travel_skims" skim_var="tt" as_var="timetowk" origin_var="origin" destination_var="destination">
        <Start table="households" location_var="htaz"/>
        <End table="persons" location_var="wtaz"/>
      </SpatialConstraints>
      <Model name="Iteration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="iterations"/>
        <Variance value="0"/>
        <Variable table="runtime" var="iterations" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
      </Model>
      <Model name="ActivityType" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="activitytype"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="200"/>
      </Model>
      <Model name="LocationID" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="locationid"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Variance value="0"/>
        <Variable table="persons" var="wtaz" coeff="1"/>
      </Model>
      <Model name="starttime" formulation="Regression" type="Stochastic Frontier" vertex="start" lower_threshold="120" upper_threshold="388" seed="1">
	<!-- Model Updated-->
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than" value="10"/>
        <Variance value="2056.04064"/>
        <Variance value="14678.78163" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="147.598926"/>
        <Variable table="households" var="sparent" coeff="15.2449512"/>
        <Variable table="persons" var="female" coeff="22.7933227"/>
        <Variable table="persons" var="fulltim" coeff="-16.1999366"/>
        <Variable table="households" var="urb" coeff="4.49060159"/>
        <Variable table="persons" var="coled" coeff="24.0393492"/>
        <Variable table="runtime" var="timetowk" coeff="-.10814276"/>
        <Variable table="households" var="incge100k" coeff="8.56066892"/>
        <Variable table="persons" var="ag45t54" coeff="-13.757635"/>
        <Variable table="persons" var="ag55t64" coeff="-10.5160682"/>
      </Model>
      <Model name="EndTime" formulation="Regression" type="Stochastic Frontier" vertex="end" lower_threshold="260" upper_threshold="671" seed="1">
	<!-- Model Updated-->
        <DependentVariable var="endtime"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than" value="10"/>
        <Variance value="8802.37522"/>
        <Variance value="12390.80039" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="340.798582"/>
        <Variable table="households" var="noc" coeff="-13.9309901"/>
        <Variable table="households" var="rur" coeff="-7.76989613"/>
        <Variable table="persons" var="female" coeff="32.0893861"/>
        <Variable table="households" var="hhsize" coeff="10.2023778"/>
        <Variable table="households_vehicles_count_r" var="vehdefi" coeff="-26.9363093"/>
        <Variable table="persons" var="parttim" coeff="-20.4197541"/>
        <Variable table="persons" var="coled" coeff="12.6921141"/>
        <Variable table="runtime" var="timetowk" coeff=".41692385"/>
        <Variable table="persons" var="ag18t24" coeff="44.8357544"/>
        <Variable table="persons" var="ag35t44" coeff="10.855806"/>
      </Model>

      <Model name="starttime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="runtime" var="iterations" condition="equals" value="10"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="120"/>
      </Model>
      <Model name="EndTime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="endtime"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="runtime" var="iterations" condition="equals" value="10"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="671"/>
      </Model>
      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="duration"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="TripCount" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tripcount"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="DummyModelforCaching" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="dependentpersonid"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="runtime" var="duration" condition="greater than" value="1"/>
        <Filter table="households" var="houseid" condition="greater than" value="0"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <RunUntilCondition table="households" var="houseid" condition="greater than" value="0"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
    </Component>

    <Component name="FixedActivity2Episodes2PrismsWorkers" read_from_table="schedule_r" key="houseid,personid" skip="False" completed="True">
      <DBTables>
        <Table table="persons" key="houseid,personid" order="1"/>
        <Table table="households" key="houseid" order="2"/>
        <Table table="households_vehicles_count_r" key="houseid"/>
        <Table table="vehicles_r" key="houseid" count_key="vehid"/>
        <Table table="workers_r" key="houseid,personid"/>
        <Table table="schedule_r" key="houseid,personid"/>
      </DBTables>
      <DeleteRecords value="True"/>
      <SpatialConstraints table="travel_skims" skim_var="tt" as_var="timetowk" origin_var="origin" destination_var="destination">
        <Start table="households" location_var="htaz"/>
        <End table="persons" location_var="wtaz"/>
      </SpatialConstraints>
      <Model name="Iteration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="iterations"/>
        <Variance value="0"/>
        <Variable table="runtime" var="iterations" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
      </Model>
      <Model name="ActivityType" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="activitytype"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="200"/>
      </Model>
      <Model name="LocationID" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="locationid"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Variance value="0"/>
        <Variable table="persons" var="wtaz" coeff="1"/>
      </Model>

      <Model name="starttime" formulation="Regression" type="Stochastic Frontier" vertex="start" lower_threshold="394" upper_threshold="795" seed="1">
	<!-- Model Updated-->
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than" value="10"/>
        <Variance value="6731.26883"/>
        <Variance value="22832.21082" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="434.468902"/>
        <Variable table="households" var="noc" coeff="-15.8044638"/>
        <Variable table="households" var="incge50k" coeff="-23.6668461"/>
        <Variable table="households" var="incge75k" coeff="19.2774425"/>
        <Variable table="persons" var="female" coeff="8.74904686"/>
        <Variable table="households" var="hhsize" coeff="10.4036196"/>
        <Variable table="households_vehicles_count_r" var="vehdefi" coeff="-15.2962792"/>
        <Variable table="persons" var="parttim" coeff="13.7740067"/>
        <Variable table="persons" var="coled" coeff="6.53713614"/>
        <Variable table="runtime" var="timetowk" coeff="-.28825684"/>
        <Variable table="persons" var="ag35t44" coeff="8.49022316"/>
      </Model>
      <Model name="EndTime" formulation="Regression" type="Stochastic Frontier" vertex="end" lower_threshold="625" upper_threshold="981" seed="1">
	<!-- Model Updated-->
        <DependentVariable var="endtime"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than" value="10"/>
        <Variance value="7490.52665"/>
        <Variance value="11868.10524" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="652.300098"/>
        <Variable table="households" var="noc" coeff="-10.9379292"/>
        <Variable table="households" var="sparent" coeff="28.3388548"/>
        <Variable table="households" var="hhsize" coeff="6.94954613"/>
        <Variable table="persons" var="fulltim" coeff="27.5713766"/>
        <Variable table="persons" var="coled" coeff="14.0991052"/>
        <Variable table="runtime" var="timetowk" coeff=".25922357"/>
        <Variable table="persons" var="ag18t24" coeff="48.2670257"/>
        <Variable table="persons" var="ag35t44" coeff="10.2833904"/>
      </Model>

      <Model name="starttime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="runtime" var="iterations" condition="equals" value="10"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="394"/>
      </Model>
      <Model name="EndTime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="endtime"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="runtime" var="iterations" condition="equals" value="10"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="981"/>
      </Model>
      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="duration"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="TripCount" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tripcount"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="DummyModelforCaching" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="dependentpersonid"/>
        <FilterSet type="and"/>
        <Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter1 table="runtime" var="endtime" condition="greater than" valuetable="runtime" valuevar="starttime"/>
        <Filter table="runtime" var="duration" condition="greater than" value="1"/>
        <Filter table="households" var="houseid" condition="greater than" value="0"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="workers_r" var="episodes" condition="equals" value="2"/>
        <RunUntilCondition table="persons" var="age" condition="greater than equals" value="18"/>
        <RunUntilCondition table="persons" var="wrkr" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <RunUntilCondition table="households" var="houseid" condition="greater than" value="0"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
    </Component>

    <Component name="FixedActivityEpisodePrismsPreschoolers" read_from_table="schedule_r" key="houseid,personid" skip="False" completed="True">
      <DBTables>
        <Table table="persons" key="houseid,personid" order="1"/>
        <Table table="households" key="houseid" order="2"/>
        <Table table="households_vehicles_count_r" key="houseid"/>
        <Table table="vehicles_r" key="houseid" count_key="vehid"/>
        <Table table="workers_r" key="houseid,personid"/>
        <Table table="schedule_r" key="houseid,personid"/>
      </DBTables>
      <DeleteRecords value="True"/>
      <Model name="Iteration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="iterations"/>
        <Variance value="0"/>
        <Variable table="runtime" var="iterations" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="presch" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
      </Model>
      <Model name="ActivityType" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="activitytype"/>
        <Filter table="persons" var="presch" condition="equals" value="1"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="300"/>
      </Model>
      <Model name="LocationID" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="locationid"/>
        <Filter table="persons" var="presch" condition="equals" value="1"/>
        <Variance value="0"/>
        <Variable table="persons" var="schtaz" coeff="1"/>
      </Model>
      <Model name="StartTime" formulation="Regression" type="Linear" vertex="start" lower_threshold="185" upper_threshold="510" seed="1">
      	<!-- Model Updated-->
        <DependentVariable var="starttime"/>
        <Filter table="persons" var="presch" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="presch" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than" value="10"/>
        <Variance value="6317.75"/>
        <Variable table="standard" var="one" coeff="60.5631628"/>
        <Variable table="households" var="rur" coeff="-15.981477"/>
        <Variable table="households" var="hhsize" coeff="-39.6193385"/>
        <Variable table="households" var="noc" coeff="41.375184"/>
        <Variable table="persons" var="age" coeff="-.00012388"/>
        <Variable table="households" var="incge50k" coeff="23.1308212"/>
        <Variable table="households" var="sparent" coeff="-71.7042354"/>
      </Model>
      <Model name="EndTime" formulation="Regression" type="Linear" vertex="end" lower_threshold="416" upper_threshold="815" seed="2">
      	<!-- Model Updated-->
        <DependentVariable var="endtime"/>
        <Filter table="persons" var="presch" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="presch" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than" value="10"/>
        <Variance value="90854.8"/>
        <Variable table="standard" var="one" coeff="150.399449"/>
        <Variable table="households" var="incge75k" coeff="120.533716"/>
        <Variable table="households" var="noc" coeff="-65.0519389"/>
        <Variable table="households" var="sparent" coeff="448.826139"/>
        <Variable table="households_vehicles_count_r" var="vehdefi" coeff="153.931515"/>
        <Variable table="households" var="hhsize" coeff="45.7196204"/>
      </Model>
      <Model name="starttime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="presch" condition="equals" value="1"/>
        <Filter table="runtime" var="iterations" condition="equals" value="10"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="presch" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="185"/>
      </Model>
      <Model name="EndTime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="endtime"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="presch" condition="equals" value="1"/>
        <Filter table="runtime" var="iterations" condition="equals" value="10"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="presch" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="815"/>
      </Model>
      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="duration"/>
        <Filter table="persons" var="presch" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="presch" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="TripCount" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tripcount"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="DummyModelforCaching" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="dependentpersonid"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="presch" condition="equals" value="1"/>
        <Filter1 table="runtime" var="endtime" condition="greater than" valuetable="runtime" valuevar="starttime"/>
        <Filter table="runtime" var="duration" condition="greater than" value="1"/>
        <Filter table="households" var="houseid" condition="greater than" value="0"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="presch" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <RunUntilCondition table="households" var="houseid" condition="greater than" value="0"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
    </Component>
    <Component name="FixedActivityEpisodePrismsSchoolers" read_from_table="schedule_r" key="houseid,personid" skip="False" completed="True">
      <DBTables>
        <Table table="persons" key="houseid,personid" order="1"/>
        <Table table="households" key="houseid" order="2"/>
        <Table table="households_vehicles_count_r" key="houseid"/>
        <Table table="vehicles_r" key="houseid" count_key="vehid"/>
        <Table table="workers_r" key="houseid,personid"/>
        <Table table="schedule_r" key="houseid,personid"/>
      </DBTables>
      <DeleteRecords value="True"/>
      <Model name="Iteration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="iterations"/>
        <Variance value="0"/>
        <Variable table="runtime" var="iterations" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="schstat" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="nadlt" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
      </Model>
      <Model name="ActivityType" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="activitytype"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="schstat" condition="equals" value="1"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="300"/>
      </Model>
      <Model name="LocationID" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="locationid"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="schstat" condition="equals" value="1"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Variance value="0"/>
        <Variable table="persons" var="schtaz" coeff="1"/>
      </Model>
      <Model name="StartTime" formulation="Regression" type="Stochastic Frontier" vertex="start" lower_threshold="179" upper_threshold="284" seed="1">
	<!-- Model Updated-->
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="schstat" condition="equals" value="1"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="schstat" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="nadlt" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than" value="10"/>
        <Variance value="1027.3755"/>
        <Variance value="3990.03551" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="188.32983"/>
        <Variable table="households" var="urb" coeff="3.1022408"/>
        <Variable table="households" var="incge50k" coeff="7.19384852"/>
        <Variable table="persons" var="age" coeff="-1.08537452"/>
      </Model>
      <Model name="EndTime" formulation="Regression" type="Log Linear" vertex="end" lower_threshold="542" upper_threshold="809" seed="2">
	<!-- Model Updated-->
        <DependentVariable var="endtime"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="schstat" condition="equals" value="1"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="schstat" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="nadlt" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than" value="10"/>
        <Variance value=".019413"/>
        <Variable table="standard" var="one" coeff="6.54998204"/>
        <Variable table="households" var="urb" coeff="-.00834912"/>
        <Variable table="persons" var="hispanic" coeff=".01127369"/>
        <Variable table="households" var="sparent" coeff="-.0159417"/>
        <Variable table="households" var="noc" coeff=".01955966"/>
        <Variable table="households" var="incge100k" coeff=".01481488"/>
        <Variable table="households" var="hhsize" coeff="-.02164717"/>
        <Variable table="persons" var="ag12t17" coeff=".02935908"/>
      </Model>

      <Model name="starttime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="schstat" condition="equals" value="1"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Filter table="runtime" var="iterations" condition="equals" value="10"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="schstat" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="nadlt" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="179"/>
      </Model>
      <Model name="EndTime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="endtime"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="schstat" condition="equals" value="1"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Filter table="runtime" var="iterations" condition="equals" value="10"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="schstat" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="nadlt" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="809"/>
      </Model>
      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="duration"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="schstat" condition="equals" value="1"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="schstat" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="nadlt" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="TripCount" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tripcount"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="DummyModelforCaching" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="dependentpersonid"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="schstat" condition="equals" value="1"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Filter table="runtime" var="endtime" condition="greater than" valuetable="runtime" valuevar="starttime"/>
        <Filter table="runtime" var="duration" condition="greater than" value="1"/>
        <Filter table="households" var="houseid" condition="greater than" value="0"/>
        <RunUntilConditionSet type="and"/>
        <RunUntilCondition table="runtime" var="duration" condition="less than equals" value="1"/>
        <RunUntilCondition table="persons" var="schstat" condition="equals" value="1"/>
        <RunUntilCondition table="persons" var="nadlt" condition="equals" value="1"/>
        <RunUntilCondition table="runtime" var="iterations" condition="less than equals" value="10"/>
        <RunUntilCondition table="households" var="houseid" condition="greater than" value="0"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
    </Component>

    <Component name="IdentifyFixedActivityVertices" read_from_table="schedule_r" write_to_table="persons_fixed_activity_vertices_r" key="houseid,personid" skip="False" completed="True">
      <DBTables>
    	<Table table="schedule_r" key="houseid,personid" order="1"/>
    	<Table table="persons_fixed_activity_vertices_r" key="houseid,personid"/>
      </DBTables>

      <Model name="IdentifyFixedActivityVertices" formulation="Identify Individual Attributes" type="Fixed Activity Vertices" seed="1">
	<DependentVariable var="Identifyfixedactivityvertices"/>

	<ActivityAttributes>
	  <HouseholdIdName table="schedule_r" var="houseid"/>
	  <PersonIdName table="schedule_r" var="personid"/>
	  <ScheduleIdName table="schedule_r" var="scheduleid"/>
	  <ActivityTypeName table="schedule_r" var="activitytype"/>
	  <LocationIdName table="schedule_r" var="locationid"/>
	  <StartTimeName table="schedule_r" var="starttime"/>
	  <EndTimeName table="schedule_r" var="endtime"/>
	  <DurationName table="schedule_r" var="duration"/>
	  <DependentPersonName table="schedule_r" var="dependentpersonid"/>
	  <TripCountName table="schedule_r" var="tripcount"/>
	</ActivityAttributes>

      </Model>

     
    </Component>	

    <Component name="MorningVertex" read_from_table="schedule_r" key="houseid,personid" skip="False" completed="True">

      <DBTables>
        <Table table="persons" key="houseid,personid" order="1"/>
        <Table table="households" key="houseid" order="2"/>
        <Table table="households_vehicles_count_r" key="houseid"/>
        <Table table="vehicles_r" key="houseid" count_key="vehid"/>
        <Table table="workers_r" key="houseid,personid"/>
        <Table table="schedule_r" key="houseid,personid"/>
        <Table table="persons_fixed_activity_vertices_r" key="houseid,personid"/>
      </DBTables>

      <SpatialConstraints table="travel_skims" skim_var="tt" as_var="timetosch" origin_var="origin" destination_var="destination">
        <Start table="households" location_var="htaz"/>
        <End table="persons" location_var="schtaz"/>
      </SpatialConstraints>

      <Model name="wstint6t7" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="wstint6t7"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="persons_fixed_activity_vertices_r" var="starttime" condition="greater than equals" value="120"/>
        <Filter table="persons_fixed_activity_vertices_r" var="starttime" condition="less than equals" value="179"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="wstint7t8" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="wstint7t8"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="persons_fixed_activity_vertices_r" var="starttime" condition="greater than equals" value="180"/>
        <Filter table="persons_fixed_activity_vertices_r" var="starttime" condition="less than equals" value="239"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="wstint8t9" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="wstint8t9"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="persons_fixed_activity_vertices_r" var="starttime" condition="greater than equals" value="240"/>
        <Filter table="persons_fixed_activity_vertices_r" var="starttime" condition="less than equals" value="299"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>

      <Model name="sstint7t8" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="sstint7t8"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Filter table="persons_fixed_activity_vertices_r" var="starttime" condition="greater than equals" value="180"/>
        <Filter table="persons_fixed_activity_vertices_r" var="starttime" condition="less than equals" value="239"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="sstint8t9" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="sstint8t9"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Filter table="persons_fixed_activity_vertices_r" var="starttime" condition="greater than equals" value="240"/>
        <Filter table="persons_fixed_activity_vertices_r" var="starttime" condition="less than equals" value="299"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>


      <Model name="ActivityType" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="activitytype"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="100"/>
      </Model>
      <Model name="LocationID" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="locationid"/>
        <Variance value="0"/>
        <Variable table="households" var="htaz" coeff="1"/>
      </Model>
      <Model name="starttime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="starttime"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>


      <Model name="endtime" formulation="Regression" type="Stochastic Frontier" vertex="start" lower_threshold="64" upper_threshold="420" seed="1">
      	<!-- Model Updated-->
        <DependentVariable var="endtime"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Variance value="1998.20583"/>
        <Variance value="24460.58056" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="94.8333372"/>
        <Variable table="runtime" var="wstint6t7" coeff="-47.224137"/>
        <Variable table="runtime" var="wstint7t8" coeff="6.58901909"/>
        <Variable table="runtime" var="wstint8t9" coeff="46.5086355"/>
        <Variable table="persons" var="agge65" coeff="16.4418005"/>
        <Variable table="persons" var="male" coeff="-20.145058"/>
        <Variable table="persons" var="coled" coeff="-20.0735904"/>
        <Variable table="households_vehicles_count_r" var="avratio" coeff="-2.54132936"/>
      </Model>
      <Model name="endtime" formulation="Regression" type="Stochastic Frontier" vertex="start" lower_threshold="150" upper_threshold="780" seed="1">
      	<!-- Model Updated-->
        <DependentVariable var="endtime"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="0"/>
        <Variance value="4675.00386"/>
        <Variance value="79954.34187" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="172.28399"/>
        <Variable table="persons" var="white" coeff="5.7273989"/>
        <Variable table="persons" var="agge65" coeff="6.55085007"/>
        <Variable table="persons" var="male" coeff="-29.23173"/>
        <Variable table="households" var="withchild" coeff="-17.3626236"/>
        <Variable table="households" var="inclt35k" coeff="9.32056781"/>
        <Variable table="persons" var="ag25t34" coeff="18.6041605"/>
      </Model>
      <Model name="endtime" formulation="Regression" type="Stochastic Frontier" vertex="start" lower_threshold="155" upper_threshold="750" seed="1">
      	<!-- Model Updated-->
        <DependentVariable var="endtime"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Variance value="1003.70032"/>
        <Variance value="51140.90575" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="127.200200"/>
        <Variable table="runtime" var="sstint7t8" coeff="-54.3900350"/>
        <Variable table="runtime" var="sstint8t9" coeff="-17.1772787"/>
        <Variable table="persons" var="ag5t14" coeff="37.2537658"/>
        <Variable table="households" var="urb" coeff="5.16366450"/>
        <Variable table="households" var="nwrkcnt" coeff="2.76748725"/>
        <Variable table="runtime" var="timetosch" coeff="-.00622154"/>
      </Model>

      <Model name="endtime" formulation="Regression" type="Stochastic Frontier" vertex="start" lower_threshold="165" upper_threshold="799" seed="1">
      	<!-- Model Updated-->
        <DependentVariable var="endtime"/>
        <Filter table="persons" var="presch" condition="equals" value="1"/>
        <Variance value="704.4204"/>
        <Variance value="74627.33755" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="170.500158"/>
        <Variable table="households" var="sparent" coeff="-44.839021"/>
        <Variable table="households" var="nwrkcnt" coeff="33.3096765"/>
        <Variable table="persons" var="white" coeff="5.7622462"/>
        <Variable table="households" var="urb" coeff="9.74411573"/>
        <Variable table="persons" var="age" coeff="-3.47625504"/>
        <Variable table="households" var="hhsize" coeff="-22.5521934"/>
      </Model>

      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="duration"/>
        <Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="TripCount" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tripcount"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="DummyModelforCaching" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="dependentpersonid"/>
        <Filter table="households" var="houseid" condition="greater than" value="0"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
    </Component>
    <Component name="EveningVertex" read_from_table="schedule_r" key="houseid,personid" skip="False" completed="True">

      <DBTables>
        <Table table="persons" key="houseid,personid" order="1"/>
        <Table table="households" key="houseid" order="2"/>
        <Table table="households_vehicles_count_r" key="houseid"/>
        <Table table="vehicles_r" key="houseid" count_key="vehid"/>
        <Table table="workers_r" key="houseid,personid"/>
        <Table table="schedule_r" key="houseid,personid"/>
        <Table table="persons_fixed_activity_vertices_r" key="houseid,personid"/>
      </DBTables>

      <SpatialConstraints table="travel_skims" skim_var="tt" as_var="timetosch" origin_var="origin" destination_var="destination">
        <Start table="households" location_var="htaz"/>
        <End table="persons" location_var="schtaz"/>
      </SpatialConstraints>
      <SpatialConstraints table="travel_skims" skim_var="tt" as_var="timetowk" origin_var="origin" destination_var="destination">
        <Start table="households" location_var="htaz"/>
        <End table="persons" location_var="wtaz"/>
      </SpatialConstraints>

      <Model name="wetint3t4" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="wetint3t4"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="persons_fixed_activity_vertices_r" var="endtime" condition="greater than equals" value="660"/>
        <Filter table="persons_fixed_activity_vertices_r" var="endtime" condition="less than equals" value="719"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="wetint4t5" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="wetint4t5"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="persons_fixed_activity_vertices_r" var="endtime" condition="greater than equals" value="720"/>
        <Filter table="persons_fixed_activity_vertices_r" var="endtime" condition="less than equals" value="779"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="wetint5t6" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="wetint5t6"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="persons_fixed_activity_vertices_r" var="endtime" condition="greater than equals" value="780"/>
        <Filter table="persons_fixed_activity_vertices_r" var="endtime" condition="less than equals" value="839"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>

      <Model name="setint2t3" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="setint2t3"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Filter table="persons_fixed_activity_vertices_r" var="endtime" condition="greater than equals" value="600"/>
        <Filter table="persons_fixed_activity_vertices_r" var="endtime" condition="less than equals" value="659"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="setint3t4" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="setint3t4"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Filter table="persons_fixed_activity_vertices_r" var="endtime" condition="greater than equals" value="660"/>
        <Filter table="persons_fixed_activity_vertices_r" var="endtime" condition="less than equals" value="719"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>

      <Model name="agedummy" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="aged"/>
        <Variance value="0"/>
        <Variable table="persons" var="age" coeff="1"/>
      </Model>
      <Model name="AgeSquare" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="age2"/>
        <Variance value="0"/>
        <Variable table="persons,runtime" var="age,aged" coeff="1" interaction="True"/>
      </Model>



      <Model name="ActivityType" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="activitytype"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="100"/>
      </Model>
      <Model name="LocationID" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="locationid"/>
        <Variance value="0"/>
        <Variable table="households" var="htaz" coeff="1"/>
      </Model>
      <Model name="starttime" formulation="Regression" type="Stochastic Frontier" vertex="end" lower_threshold="685" upper_threshold="1112" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="1"/>
        <Variance value="14262.81877"/>
        <Variance value="5740.51752" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="926.318994"/>
        <Variable table="households" var="numadlt" coeff="7.84574292"/>
        <Variable table="households" var="incge75k" coeff="3.95702005"/>
        <Variable table="persons" var="coled" coeff="22.8630847"/>
        <Variable table="runtime" var="timetowk" coeff=".01137772"/>
        <Variable table="households" var="rur" coeff="-10.7285523"/>
        <Variable table="households" var="noc" coeff="5.1800897"/>
        <Variable table="persons" var="agge65" coeff="-18.9671547"/>
        <Variable table="persons" var="ag18t24" coeff="63.9129165"/>
        <Variable table="runtime" var="wetint3t4" coeff="-88.9460621"/>
        <Variable table="runtime" var="wetint4t5" coeff="-52.1176252"/>
        <Variable table="runtime" var="wetint5t6" coeff="-25.8573074"/>
      </Model>
      <Model name="starttime" formulation="Regression" type="Stochastic Frontier" vertex="end" lower_threshold="382" upper_threshold="1080" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Filter table="persons" var="wrkr" condition="equals" value="0"/>
        <Variance value="26659.75835"/>
        <Variance value="25264.98586" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="876.868163"/>
        <Variable table="persons" var="ag18t24" coeff="33.5851721"/>
        <Variable table="persons" var="ag55t64" coeff="-24.4690434"/>
        <Variable table="persons" var="agge65" coeff="-52.4274446"/>
        <Variable table="households" var="urb" coeff="7.78016644"/>
        <Variable table="persons" var="coled" coeff="25.3908256"/>
        <Variable table="households" var="inclt35k" coeff="-13.7790033"/>
        <Variable table="households" var="incge75k" coeff="13.1438828"/>
        <Variable table="households" var="noc" coeff="12.2970497"/>
      </Model>
      <Model name="starttime" formulation="Regression" type="Stochastic Frontier" vertex="end" lower_threshold="603" upper_threshold="1060" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="starttime"/>
        <Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Variance value="18172.8519"/>
        <Variance value="8391.42733" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="886.612506"/>
        <Variable table="runtime" var="setint2t3" coeff="-53.2330232"/>
        <Variable table="runtime" var="setint3t4" coeff="-34.1799386"/>
        <Variable table="runtime" var="timetosch" coeff="-.00618701"/>
        <Variable table="persons" var="ag15t17" coeff="22.8114812"/>
        <Variable table="households" var="sparent" coeff="23.2909687"/>
        <Variable table="households" var="numwrkr" coeff="10.2400608"/>
        <Variable table="households" var="inclt35k" coeff="-16.4019103"/>
      </Model>
      <Model name="starttime" formulation="Regression" type="Stochastic Frontier" vertex="end" lower_threshold="460" upper_threshold="1050" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="starttime"/>
        <Filter table="persons" var="presch" condition="equals" value="1"/>
        <Variance value="14038.52351"/>
        <Variance value="42562.29441" type="Half Normal"/>
        <Variable table="standard" var="one" coeff="959.744622"/>
        <Variable table="households" var="nwrkcnt" coeff="-5.26968796"/>
        <Variable table="households" var="sparent" coeff="53.0730045"/>
        <Variable table="households" var="own" coeff="-9.77480601"/>
        <Variable table="households" var="inc75t100" coeff="-11.7398684"/>
        <Variable table="runtime" var="age2" coeff="10.5771594"/>
      </Model>

      <Model name="endtime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="endtime"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1439"/>
      </Model>
      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="duration"/>
        <Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="TripCount" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tripcount"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="DummyModelforCaching" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="dependentpersonid"/>
        <Filter table="households" var="houseid" condition="greater than" value="0"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
    </Component>






    <Component name="DailySchStatus" read_from_table="daily_school_status_r" key="houseid,personid" skip="False" completed="True">
      <DBTables>
    	<Table table="persons" key="houseid,personid" order="1"/>
    	<Table table="households" key="houseid" order="2"/>
    	<Table table="daily_school_status_r" key="houseid,personid"/>
      </DBTables>

      <Model name="DailySchStatus" formulation="Probability Distribution" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="schdailystatus"/>
        <FilterSet type="and"/>
	<Filter table="persons" var="presch" condition="equals" value="1"/>
	<Filter table="persons" var="age" condition="equals" value="0"/>
        <Alternative id="yes" value="1">
	  <Variable table="standard" var="one" coeff="0.15"/>
        </Alternative>
        <Alternative id="No" value="0">
	  <Variable table="standard" var="one" coeff="0.85"/>
        </Alternative>
      </Model>
      <Model name="DailySchStatus" formulation="Probability Distribution" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="schdailystatus"/>
        <FilterSet type="and"/>
	<Filter table="persons" var="presch" condition="equals" value="1"/>
	<Filter table="persons" var="age" condition="equals" value="1"/>
        <Alternative id="yes" value="1">
	  <Variable table="standard" var="one" coeff="0.18"/>
        </Alternative>
        <Alternative id="No" value="0">
	  <Variable table="standard" var="one" coeff="0.82"/>
        </Alternative>
      </Model>
      <Model name="DailySchStatus" formulation="Probability Distribution" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="schdailystatus"/>
        <FilterSet type="and"/>
	<Filter table="persons" var="presch" condition="equals" value="1"/>
	<Filter table="persons" var="age" condition="equals" value="2"/>
        <Alternative id="yes" value="1">
	  <Variable table="standard" var="one" coeff="0.25"/>
        </Alternative>
        <Alternative id="No" value="0">
	  <Variable table="standard" var="one" coeff="0.75"/>
        </Alternative> 
      </Model>
      <Model name="DailySchStatus" formulation="Probability Distribution" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="schdailystatus"/>
        <FilterSet type="and"/>
	<Filter table="persons" var="presch" condition="equals" value="1"/>
	<Filter table="persons" var="age" condition="equals" value="3"/>
        <Alternative id="yes" value="1">
	  <Variable table="standard" var="one" coeff="0.32"/>
        </Alternative>
        <Alternative id="No" value="0">
	  <Variable table="standard" var="one" coeff="0.68"/>
        </Alternative>
      </Model>
      <Model name="DailySchStatus" formulation="Probability Distribution" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="schdailystatus"/>
        <FilterSet type="and"/>
	<Filter table="persons" var="presch" condition="equals" value="1"/>
	<Filter table="persons" var="age" condition="equals" value="4"/>
        <Alternative id="yes" value="1">
	  <Variable table="standard" var="one" coeff="0.41"/>
        </Alternative>
        <Alternative id="No" value="0">
	  <Variable table="standard" var="one" coeff="0.59"/>
        </Alternative>
      </Model>
      <Model name="DailySchStatusNonAdults" formulation="Probability Distribution" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="schdailystatus"/>
        <FilterSet type="and"/>
	<Filter table="persons" var="schstat" condition="equals" value="1"/>
	<Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Alternative id="yes" value="1">
	  <Variable table="standard" var="one" coeff="0.62"/>
        </Alternative>
        <Alternative id="No" value="0">
	  <Variable table="standard" var="one" coeff="0.38"/>
        </Alternative>
      </Model>
      <Model name="DailySchStatusAdults" formulation="Probability Distribution" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="schdailystatus"/>
        <FilterSet type="and"/>
	<Filter table="persons" var="schstat" condition="equals" value="1"/>
	<Filter table="persons" var="age" condition="greater than equals" value="18"/>
        <Alternative id="yes" value="1">
	  <Variable table="standard" var="one" coeff="0.62"/>
        </Alternative>
        <Alternative id="No" value="0">
	  <Variable table="standard" var="one" coeff="0.38"/>
        </Alternative>
      </Model>
      <Model name="DummyModelforCaching" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="dummy"/>
        <FilterSet type="and"/>
	<Filter table="households" var="houseid" condition="greater than" value="0"/>
	<Filter table="runtime" var="schdailystatus" condition="equals" value="1"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
    </Component>	

    <Component name="DailyWorkStatus" read_from_table="daily_work_status_r" key="houseid,personid" skip="False" completed="True">
      <DBTables>
    	<Table table="persons" key="houseid,personid" order="1"/>
    	<Table table="households" key="houseid" order="2"/>
    	<Table table="daily_work_status_r" key="houseid,personid"/>
    	<Table table="workers_r" key="houseid,personid"/>
	
      </DBTables>

      <Model name="DailyWorkStatusAdults" formulation="Probability Distribution" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="wrkdailystatus"/>
        <FilterSet type="and"/>
	<Filter table="persons" var="wrkr" condition="equals" value="1"/>
	<Filter table="persons" var="age" condition="greater than equals" value="18"/>
	<Filter table="workers_r" var="episodes" condition="equals" value="1"/>
        <Alternative id="yes" value="1">
	  <Variable table="standard" var="one" coeff="0.67"/>
        </Alternative>
        <Alternative id="No" value="0">
	  <Variable table="standard" var="one" coeff="0.33"/>
        </Alternative>
      </Model>
      <Model name="DailyWorkStatusAdults" formulation="Probability Distribution" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="wrkdailystatus"/>
        <FilterSet type="and"/>
	<Filter table="persons" var="wrkr" condition="equals" value="1"/>
	<Filter table="persons" var="age" condition="greater than equals" value="18"/>
	<Filter table="workers_r" var="episodes" condition="equals" value="2"/>
        <Alternative id="yes" value="1">
	  <Variable table="standard" var="one" coeff="0.67"/>
        </Alternative>
        <Alternative id="No" value="0">
	  <Variable table="standard" var="one" coeff="0.33"/>
        </Alternative>
      </Model>


      <Model name="DailyWorkStatusNonAdults" formulation="Probability Distribution" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="wrkdailystatus"/>
        <FilterSet type="and"/>
	<Filter table="persons" var="wrkr" condition="equals" value="1"/>
	<Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Alternative id="yes" value="1">
	  <Variable table="standard" var="one" coeff="0.37"/>
        </Alternative>
        <Alternative id="No" value="0">
	  <Variable table="standard" var="one" coeff="0.63"/>
        </Alternative>
      </Model>
      <Model name="DummyModelforCaching" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="dummy"/>
        <FilterSet type="and"/>
	<Filter table="persons" var="houseid" condition="greater than" value="0"/>
	<Filter table="runtime" var="wrkdailystatus" condition="equals" value="1"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
    </Component>	


    <Component name="ChildDependency" read_from_table="child_dependency_r" key="houseid,personid" dependency="False" skip="False" completed="True">
      <DBTables>
    	<Table table="persons" key="houseid,personid" order="1"/>
    	<Table table="households" key="houseid" order="2"/>
    	<Table table="child_dependency_r" key="houseid,personid"/>
      </DBTables>

      <SpatialConstraints table="travel_skims" skim_var="tt" as_var="timetosch" origin_var="origin" destination_var="destination">
        <Start table="households" location_var="htaz"/>
        <End table="persons" location_var="schtaz"/>
      </SpatialConstraints>


      <Model name="PreSchoolKidsDependency" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="dependency"/>
        <FilterSet type="and"/>
	<Filter table="persons" var="presch" condition="equals" value="1"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>

      <Model name="OtherKidsDependency" formulation="Multinomial Logit" type="Alternative Specific" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="dependency"/>
	<Filter table="persons" var="nadlt" condition="equals" value="1"/>
        <Alternative id="yes" value="1">
          <Variable table="standard" var="one" coeff="-.34047243"/>
          <Variable table="persons" var="ag5t10" coeff=".52194177"/>
          <Variable table="persons" var="ag11t14" coeff=".29459331"/>
          <Variable table="persons" var="hispanic" coeff=".07330492"/>
          <Variable table="persons" var="male" coeff="-.04608933"/>
          <Variable table="households" var="urb" coeff="-.03940303"/>
          <Variable table="households" var="nwrkcnt" coeff=".08304306"/>
          <Variable table="households" var="noc" coeff="-.09036826"/>
          <Variable table="households" var="inclt35k" coeff="-.05248161"/>
          <Variable table="households" var="sparent" coeff="-.14838189"/>
	  <Variable table="runtime" var="timetosch" coeff="-.00003896"/>
        </Alternative>
        <Alternative id="no" value="0">
          <Variable table="standard" var="one" coeff="0.0"/>
        </Alternative>
      </Model>

      <Model name="DummyModelforCaching" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="dummy"/>
	<Filter table="households" var="houseid" condition="greater than" value="0"/>
	<Filter table="runtime" var="dependency" condition="equals" value="1"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>

    </Component>	

    <Component name="CleanDailyFixedActivitySchedule" read_from_table="schedule_r" write_to_table="schedule_cleanfixedactivityschedule_r" key="houseid,personid" skip="False" completed="True">
      <DBTables>
    	<Table table="daily_work_status_r" key="houseid,personid"/>
    	<Table table="daily_school_status_r" key="houseid,personid"/>		
    	<Table table="child_dependency_r" key="houseid,personid"/>
    	<Table table="schedule_r" key="houseid,personid" order="1"/>
    	<Table table="schedule_cleanfixedactivityschedule_r" key="houseid,personid"/>
      </DBTables>

      <DeleteRecords value="False"/>	

      <Model name="CleanFixedActivitySchedulesofChildren" formulation="Clean Fixed Activity Schedule" seed="1">
	<DependentVariable var="cleanfixedactivityschedulesofchildren"/>

	<ActivityAttributes>
	  <HouseholdIdName table="schedule_r" var="houseid"/>
	  <PersonIdName table="schedule_r" var="personid"/>
	  <ScheduleIdName table="schedule_r" var="scheduleid"/>
	  <ActivityTypeName table="schedule_r" var="activitytype"/>
	  <LocationIdName table="schedule_r" var="locationid"/>
	  <StartTimeName table="schedule_r" var="starttime"/>
	  <EndTimeName table="schedule_r" var="endtime"/>
	  <DurationName table="schedule_r" var="duration"/>
	  <DependentPersonName table="schedule_r" var="dependentpersonid"/>
	  <TripCountName table="schedule_r" var="tripcount"/>
	</ActivityAttributes>

	<DailyStatus>
	  <DailySchoolStatus table="daily_school_status_r" var="schdailystatus"/>
	  <DailyWorkStatus table="daily_work_status_r" var="wrkdailystatus"/>
	</DailyStatus>
	
	<Dependency>
	  <ChildDependency table="child_dependency_r" var="dependency"/>
	</Dependency>

      </Model>

     
    </Component>	

    <Component name="ReconcileLongerTermSchedules" read_from_table="schedule_cleanfixedactivityschedule_r" write_to_table="schedule_ltrec_r" key="houseid,personid" location="True" skip="False" completed="True">
      <DBTables>
    	<Table table="schedule_ltrec_r" key="houseid,personid"/>
    	<Table table="schedule_cleanfixedactivityschedule_r" key="houseid,personid" order="1"/>
      </DBTables>

      <DeleteRecords value="False"/>	


      <Model name="ReconcileSchedules" formulation="Reconcile Schedules" seed="1">
	<DependentVariable var="reconcileschedules"/>

	<ActivityAttributes>
	  <HouseholdIdName table="schedule_cleanfixedactivityschedule_r" var="houseid"/>
	  <PersonIdName table="schedule_cleanfixedactivityschedule_r" var="personid"/>
	  <ScheduleIdName table="schedule_cleanfixedactivityschedule_r" var="scheduleid"/>
	  <ActivityTypeName table="schedule_cleanfixedactivityschedule_r" var="activitytype"/>
	  <LocationIdName table="schedule_cleanfixedactivityschedule_r" var="locationid"/>
	  <StartTimeName table="schedule_cleanfixedactivityschedule_r" var="starttime"/>
	  <EndTimeName table="schedule_cleanfixedactivityschedule_r" var="endtime"/>
	  <DurationName table="schedule_cleanfixedactivityschedule_r" var="duration"/>
	  <DependentPersonName table="schedule_cleanfixedactivityschedule_r" var="dependentpersonid"/>
	  <TripCountName table="schedule_cleanfixedactivityschedule_r" var="tripcount"/>
	</ActivityAttributes>

      </Model>
     
    </Component>

    <Component name="ChildDependencyTerminalAllocation" read_from_table="schedule_ltrec_r" write_to_table="schedule_allocterm_r" key="houseid,personid" location="True" skip="False" completed="True">
      <DBTables>
    	<Table table="daily_work_status_r" key="houseid,personid"/>
    	<Table table="daily_school_status_r" key="houseid,personid"/>		
    	<Table table="child_dependency_r" key="houseid,personid"/>
    	<Table table="schedule_ltrec_r" key="houseid,personid" order="1"/>
    	<Table table="schedule_allocterm_r" key="houseid,personid"/>
    	<Table table="schedule_joint_allocterm_r" key="houseid,personid"/>
      </DBTables>

      <DeleteRecords value="False"/>	



      <Model name="ChildDependencyAllocation" formulation="Child Dependency Allocation Terminal" seed="1">
	<DependentVariable var="childdependencyallocation"/>

	<ActivityAttributes>
	  <HouseholdIdName table="schedule_ltrec_r" var="houseid"/>
	  <PersonIdName table="schedule_ltrec_r" var="personid"/>
	  <ScheduleIdName table="schedule_ltrec_r" var="scheduleid"/>
	  <ActivityTypeName table="schedule_ltrec_r" var="activitytype"/>
	  <LocationIdName table="schedule_ltrec_r" var="locationid"/>
	  <StartTimeName table="schedule_ltrec_r" var="starttime"/>
	  <EndTimeName table="schedule_ltrec_r" var="endtime"/>
	  <DurationName table="schedule_ltrec_r" var="duration"/>
	  <DependentPersonName table="schedule_ltrec_r" var="dependentpersonid"/>
	  <TripCountName table="schedule_ltrec_r" var="tripcount"/>
	</ActivityAttributes>

	<DailyStatus>
	  <DailySchoolStatus table="daily_school_status_r" var="schdailystatus"/>
	  <DailyWorkStatus table="daily_work_status_r" var="wrkdailystatus"/>
	</DailyStatus>
	
	<Dependency>
	  <ChildDependency table="child_dependency_r" var="dependency"/>
	</Dependency>

      </Model>

     
   </Component>	

    <ComponentList>
      <AnalysisInterval start="0" end="1440" step="1"/>

    <SubComponent name="PersonsHistory" read_from_table="schedule_allocterm_r" write_to_table="persons_history_r" key="houseid,personid" location="True" skip="False" completed="True">
      <DBTables>
    	<Table table="schedule_allocterm_r" key="houseid,personid" order="1"/>
    	<Table table="persons" key="houseid,personid"/>
    	<Table table="persons_history_r" key="houseid,personid"/>
      </DBTables>
      <AnalysisIntervalFilter table="schedule_allocterm_r" var="endtime"/>
      <DeleteBasedOn table="persons_history_r" var="personuniqueid"/>

      <Model name="PersonUniqueIdDumy" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="personuniqueiddummy"/>
	<Variance value="0"/>
        <Variable table="persons" var="personuniqueid" coeff="1"/>

      </Model>
      <Model name="IHHistory" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="ih_history"/>
        <FilterSet type="and"/>
	<Filter table="schedule_allocterm_r" var="activitytype" condition="greater than equals" value="100"/>
	<Filter table="schedule_allocterm_r" var="activitytype" condition="less than" value="199"/>
	<Variance value="0"/>
        <Variable table="schedule_allocterm_r" var="duration" coeff="1"/>
        <Variable table="persons_history_r" var="ih_history" coeff="1"/>
      </Model>

      <Model name="MaintenanceHistory" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="maintenance_history"/>
        <FilterSet type="and"/>
	<Filter table="schedule_allocterm_r" var="activitytype" condition="greater than equals" value="400"/>
	<Filter table="schedule_allocterm_r" var="activitytype" condition="less than" value="499"/>
	<Variance value="0"/>
        <Variable table="schedule_allocterm_r" var="duration" coeff="1"/>
        <Variable table="persons_history_r" var="maintenance_history" coeff="1"/>
      </Model>

      <Model name="DiscretionaryHistory" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="discretionary_history"/>
        <FilterSet type="and"/>
	<Filter table="schedule_allocterm_r" var="activitytype" condition="greater than equals" value="500"/>
	<Filter table="schedule_allocterm_r" var="activitytype" condition="less than" value="598"/>
	<Variance value="0"/>
        <Variable table="schedule_allocterm_r" var="duration" coeff="1"/>
        <Variable table="persons_history_r" var="discretionary_history" coeff="1"/>
      </Model>


      <Model name="FixedHistory" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="fixed_history"/>
        <FilterSet type="and"/>
	<Filter table="schedule_allocterm_r" var="activitytype" condition="greater than equals" value="200"/>
	<Filter table="schedule_allocterm_r" var="activitytype" condition="less than" value="400"/>
	<Variance value="0"/>
        <Variable table="schedule_allocterm_r" var="duration" coeff="1"/>
        <Variable table="persons_history_r" var="fixed_history" coeff="1"/>
      </Model>
      <Model name="PersonUniqueIdDumy" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="personuniqueiddummy"/>
	<Variance value="0"/>
        <Variable table="persons" var="personuniqueid" coeff="1"/>

      </Model>


   </SubComponent>



    <SubComponent name="AfterSchoolActivities" read_from_table="schedule_allocterm_r" key="houseid,personid" location="True" skip="False" completed="True">
      <DBTables>
    	<Table table="persons" key="houseid,personid" order="1"/>
    	<Table table="households" key="houseid" order="2"/>
    	<Table table="households_vehicles_count_r" key="houseid"/>
    	<Table table="vehicles_r" key="houseid" count_key="vehid"/>
    	<Table table="workers_r" key="houseid,personid"/>		
    	<Table table="schedule_r" key="houseid,personid"/>
    	<Table table="schedule_allocterm_r" key="houseid,personid"/>
    	<Table table="child_dependency_r" key="houseid,personid"/>
    	<Table table="daily_work_status_r" key="houseid,personid"/>
    	<Table table="daily_school_status_r" key="houseid,personid"/>
    	<Table table="persons_history_r" key="houseid,personid"/>
      </DBTables>

      <SpatialConstraints table="travel_skims" sample_var="destination" skim_var="tt" as_var="tt_to" origin_var="origin" destination_var="destination" count="5" seed="1" threshold="120">
        <ActivityFilter table="locations" var="retail_employment_ind" condition="equals" value="1"/>
	<Start table="schedule_allocterm_r" location_var="locationid" time_var="endtime"/>
	<End table="schedule_allocterm_r" location_var="locationid" time_var="starttime"/>

	<ExtractLocationInformation table="locations" location_var="locationid">
	  <LocationVariable var="retail_employment"/>

	  <LocationVariable var="retail_employment_density"/>
	  <LocationVariable var="other_employment_density"/>
	  <LocationVariable var="office_employment_density"/>

	  <LocationVariable var="total_area"/>

	  <LocationVariable var="low_income"/>
	  <LocationVariable var="high_income"/>


          <FilterSet type="or"/>
	  <Filter table="runtime" var="retail_employment" condition="greater than" value="0"/>
	  <Filter table="runtime" var="public_employment" condition="greater than" value="0"/>
	  <Filter table="runtime" var="office_employment" condition="greater than" value="0"/>
	  <Filter table="runtime" var="industrial_employment" condition="greater than" value="0"/>
	  <Filter table="runtime" var="other_employment" condition="greater than" value="0"/>

	</ExtractLocationInformation>
      </SpatialConstraints>

      <PreProcessData name="PreProcessData">
	<Filter table="child_dependency_r" var="dependency" condition="equals" value="0"/>
      </PreProcessData>
	
      <ConsistencyChecks name="AfterSchoolActivityChecks">
	<Filter table="runtime" var="locationid" condition="greater than" value="0"/>
	<Filter table="runtime" var="prismduration" condition="greater than" value="15"/>
	<Filter table="runtime" var="endtime" condition="less than" valuetable="runtime" valuevar="en_starttime" percentage_threshold="" absolute_threshold=""/>
	<Filter table="runtime" var="activitytravelend" condition="less than" valuetable="runtime" valuevar="en_starttime"/>
      </ConsistencyChecks>


      <Model name="TODInd6to9a" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="int6t9a"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="st_endtime" condition="greater than equals" value="120"/>
	<Filter table="runtime" var="st_endtime" condition="less than equals" value="299"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="TODInd11t1p" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="int11t1p"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="st_endtime" condition="greater than equals" value="420"/>
	<Filter table="runtime" var="st_endtime" condition="less than equals" value="539"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="TODInd1t4p" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="int1t4p"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="st_endtime" condition="greater than equals" value="540"/>
	<Filter table="runtime" var="st_endtime" condition="less than equals" value="719"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="TODInd1t3p" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="int1t3p"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="st_endtime" condition="greater than equals" value="540"/>
	<Filter table="runtime" var="st_endtime" condition="less than equals" value="659"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="TODInd3t5p" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="int3t5p"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="st_endtime" condition="greater than equals" value="660"/>
	<Filter table="runtime" var="st_endtime" condition="less than equals" value="779"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="TODInd4t7p" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="int4t7p"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="st_endtime" condition="greater than equals" value="720"/>
	<Filter table="runtime" var="st_endtime" condition="less than equals" value="899"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="TODInd5t7p" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="int5t7p"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="st_endtime" condition="greater than equals" value="780"/>
	<Filter table="runtime" var="st_endtime" condition="less than equals" value="899"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="TODIndaft7p" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="intaft7"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="st_endtime" condition="greater than equals" value="900"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>


      <Model name="AftSchActivityTypeNonWorkers" formulation="Multinomial Logit" type="Alternative Specific" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="activitytype"/>
        <FilterSet type="and"/>
        <Filter table="daily_work_status_r" var="wrkdailystatus" condition="equals" value="0"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>


        <Alternative id="inhome" value="101">
          <Variable table="standard" var="one" coeff="1.2451598"/>
          <Variable table="persons_history_r" var="ih_history" coeff="-.00249585"/>
          <Variable table="persons" var="ag5t14" coeff=".31088129"/>
          <Variable table="households" var="inc50t75" coeff="-.22519772"/>
          <Variable table="runtime" var="int6t9a" coeff="-1.28290015"/>
          <Variable table="runtime" var="int1t4p" coeff="1.04329538"/>
          <Variable table="runtime" var="int4t7p" coeff="1.01579243"/>
        </Alternative>

        <Alternative id="perbus" value="411">
          <Variable table="standard" var="one" coeff=".01992117"/>
          <Variable table="households" var="incge50k" coeff="-.67355957"/>
          <Variable table="households" var="noc" coeff="-.19883891"/>
          <Variable table="runtime" var="int11t1p" coeff=".31252737"/>
          <Variable table="runtime" var="int4t7p" coeff=".86386804"/>
        </Alternative>

        <Alternative id="shop" value="412">
          <Variable table="standard" var="one" coeff=".91981525"/>
          <Variable table="persons_history_r" var="maintenance_history" coeff=".00403301"/>
          <Variable table="persons" var="white" coeff="-.23659229"/>
          <Variable table="households" var="inclt35k" coeff=".34223509"/>
          <Variable table="runtime" var="int11t1p" coeff=".40035337"/>
          <Variable table="runtime" var="int1t4p" coeff=".29539383"/>
          <Variable table="runtime" var="int4t7p" coeff=".95741303"/>
        </Alternative>

        <Alternative id="social" value="513">
          <Variable table="standard" var="one" coeff="-.06571433"/>
          <Variable table="households" var="incge75k" coeff="-.33645379"/>
          <Variable table="households" var="urb" coeff=".25128007"/>
          <Variable table="runtime" var="int4t7p" coeff="1.07886063"/>
        </Alternative>

        <Alternative id="sprec" value="514">
          <Variable table="standard" var="one" coeff="-.05731808"/>
          <Variable table="persons_history_r" var="discretionary_history" coeff="-.00166075"/>
          <Variable table="households" var="incge50k" coeff=".44007183"/>
          <Variable table="persons" var="agge15" coeff="-.85912612"/>
          <Variable table="runtime" var="int1t4p" coeff=".23822141"/>
          <Variable table="runtime" var="int4t7p" coeff="1.63782708"/>
        </Alternative>

        <Alternative id="meal" value="415">
          <Variable table="standard" var="one" coeff="-.13004418"/>
          <Variable table="households" var="inclt35k" coeff="-.3333379"/>
          <Variable table="persons" var="female" coeff=".27765506"/>
          <Variable table="runtime" var="int11t1p" coeff=".80764428"/>
          <Variable table="runtime" var="int4t7p" coeff="1.23938055"/>
        </Alternative>

        <Alternative id="other" value="599">
          <Variable table="standard" var="one" coeff="0.0"/>
        </Alternative>
      </Model>

 




      <Model name="AftSchActivityTypeWithWork" formulation="Multinomial Logit" type="Alternative Specific" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="activitytype"/>
        <FilterSet type="and"/>
        <Filter table="daily_work_status_r" var="wrkdailystatus" condition="equals" value="1"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>

        <Alternative id="inhome" value="101">
          <Variable table="standard" var="one" coeff="1.2451598"/>
          <Variable table="persons_history_r" var="ih_history" coeff="-.00249585"/>
          <Variable table="persons" var="ag5t14" coeff=".31088129"/>
          <Variable table="households" var="inc50t75" coeff="-.22519772"/>
          <Variable table="runtime" var="int6t9a" coeff="-1.28290015"/>
          <Variable table="runtime" var="int1t4p" coeff="1.04329538"/>
          <Variable table="runtime" var="int4t7p" coeff="1.01579243"/>
        </Alternative>

        <Alternative id="work" value="201">
          <Variable table="standard" var="one" coeff="-3.3317314"/>
          <Variable table="persons" var="agge15" coeff="3.08929873"/>
          <Variable table="households" var="incge50k" coeff="-.85174396"/>
          <Variable table="runtime" var="int4t7p" coeff=".90570229"/>
        </Alternative>

        <Alternative id="perbus" value="411">
          <Variable table="standard" var="one" coeff=".01992117"/>
          <Variable table="households" var="incge50k" coeff="-.67355957"/>
          <Variable table="households" var="noc" coeff="-.19883891"/>
          <Variable table="runtime" var="int11t1p" coeff=".31252737"/>
          <Variable table="runtime" var="int4t7p" coeff=".86386804"/>
        </Alternative>

        <Alternative id="shop" value="412">
          <Variable table="standard" var="one" coeff=".91981525"/>
          <Variable table="persons_history_r" var="maintenance_history" coeff=".00403301"/>
          <Variable table="persons" var="white" coeff="-.23659229"/>
          <Variable table="households" var="inclt35k" coeff=".34223509"/>
          <Variable table="runtime" var="int11t1p" coeff=".40035337"/>
          <Variable table="runtime" var="int1t4p" coeff=".29539383"/>
          <Variable table="runtime" var="int4t7p" coeff=".95741303"/>
        </Alternative>

        <Alternative id="social" value="513">
          <Variable table="standard" var="one" coeff="-.06571433"/>
          <Variable table="households" var="incge75k" coeff="-.33645379"/>
          <Variable table="households" var="urb" coeff=".25128007"/>
          <Variable table="runtime" var="int4t7p" coeff="1.07886063"/>
        </Alternative>

        <Alternative id="sprec" value="514">
          <Variable table="standard" var="one" coeff="-.05731808"/>
          <Variable table="persons_history_r" var="discretionary_history" coeff="-.00166075"/>
          <Variable table="households" var="incge50k" coeff=".44007183"/>
          <Variable table="persons" var="agge15" coeff="-.85912612"/>
          <Variable table="runtime" var="int1t4p" coeff=".23822141"/>
          <Variable table="runtime" var="int4t7p" coeff="1.63782708"/>
        </Alternative>

        <Alternative id="meal" value="415">
          <Variable table="standard" var="one" coeff="-.13004418"/>
          <Variable table="households" var="inclt35k" coeff="-.3333379"/>
          <Variable table="persons" var="female" coeff=".27765506"/>
          <Variable table="runtime" var="int11t1p" coeff=".80764428"/>
          <Variable table="runtime" var="int4t7p" coeff="1.23938055"/>
        </Alternative>

        <Alternative id="other" value="599">
          <Variable table="standard" var="one" coeff="0.0"/>
        </Alternative>


      </Model>


      <Model name="ActivityTypeInd" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="activitytype_101"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="activitytype" condition="equals" value="101"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="ActivityTypeInd" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="activitytype_201"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="activitytype" condition="equals" value="201"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="ActivityTypeInd" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="activitytype_411"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="activitytype" condition="equals" value="411"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="ActivityTypeInd" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="activitytype_412"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="activitytype" condition="equals" value="412"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="ActivityTypeInd" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="activitytype_415"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="activitytype" condition="equals" value="415"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="ActivityTypeInd" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="activitytype_513"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="activitytype" condition="equals" value="513"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="ActivityTypeInd" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="activitytype_514"/>
        <FilterSet type="and"/>
	<Filter table="runtime" var="activitytype" condition="equals" value="514"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>

      <Model name="AftSchActDuration" formulation="Regression" type="Linear" vertex="start" lower_threshold="5" upper_threshold="550" seed="1">
 	<!-- Model Updated-->
        <DependentVariable var="duration"/>
        <Filter table="persons" var="age" condition="less than" value="18"/>
        <Variance value="7084.08"/>
        <Variable table="standard" var="one" coeff="108.457175"/>
        <Variable table="runtime" var="activitytype_101" coeff="59.7826924"/>
        <Variable table="runtime" var="activitytype_412" coeff="-60.6124626"/>
        <Variable table="runtime" var="activitytype_415" coeff="-52.1771495"/>
        <Variable table="runtime" var="activitytype_513" coeff="49.820996"/>
        <Variable table="runtime" var="activitytype_514" coeff="36.7596683"/>
        <Variable table="persons" var="white" coeff="-10.1386312"/>
        <Variable table="households" var="sparent" coeff="11.6463622"/>
        <Variable table="households" var="inc35t50" coeff="8.0789885"/>
        <Variable table="households,runtime" var="inclt35k,activitytype_513" coeff="44.6579094" interaction="True"/>
        <Variable table="households,runtime" var="urb,activitytype_514" coeff="-14.7388369" interaction="True"/>
        <Variable table="runtime,runtime" var="int3t5p,activitytype_101" coeff="-36.9070141" interaction="True"/>
        <Variable table="runtime,runtime" var="int3t5p,activitytype_412" coeff="20.0109544" interaction="True"/>
        <Variable table="runtime,runtime" var="int3t5p,activitytype_513" coeff="-47.3743241" interaction="True"/>
        <Variable table="runtime,runtime" var="int5t7p,activitytype_101" coeff="-112.26831" interaction="True"/>
        <Variable table="runtime,runtime" var="int5t7p,activitytype_513" coeff="-31.0347483" interaction="True"/>
        <Variable table="runtime,runtime" var="int5t7p,activitytype_514" coeff="-32.6098701" interaction="True"/>
        <Variable table="runtime" var="int1t3p" coeff="-11.2624224"/>
        <Variable table="runtime" var="int3t5p" coeff="-23.0616031"/>
        <Variable table="runtime" var="intaft7" coeff="-40.3894428"/>
      </Model>

      <Model name="LocationIDIHActs" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="locationid"/>
        <FilterSet type="and"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
	<Filter table="runtime" var="activitytype" condition="less than" value="200"/>
	<Variance value="0"/>
        <Variable table="households" var="htaz" coeff="1"/>
      </Model>

      <Model name="LocationIDIHActs" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="locationid"/>
        <FilterSet type="and"/>
	<Filter1 table="persons" var="wrkr" condition="equals" value="1"/>
        <Filter table="daily_work_status_r" var="wrkdailystatus" condition="equals" value="1"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
	<Filter table="runtime" var="activitytype" condition="greater than equals" value="200"/>
	<Filter table="runtime" var="activitytype" condition="less than" value="300"/>
	<Variance value="0"/>
        <Variable table="persons" var="wtaz" coeff="1"/>
      </Model>

      <Model name="locationIDOHActs" formulation="Multinomial Logit" seed="1">
 	<!-- Model Updated-->
        <AlternativeSet count="5"/>
        <DependentVariable var="locationid"/>
        <FilterSet type="and"/>
        <Filter table="persons" var="age" condition="less than" value="18"/>
        <Filter table="runtime" var="activitytype" condition="greater than" value="400"/>
        <Variable table="travel_skims" var="tt_to" coeff="-.13787556" repeat="tt_to"/>
        <Variable table="runtime,travel_skims" var="activitytype_412,tt_to" coeff="-.03717037" interaction="True" repeat="tt_to"/>
        <Variable table="runtime,travel_skims" var="activitytype_514,tt_to" coeff="-.0420764" interaction="True" repeat="tt_to"/>
        <Variable table="runtime,travel_skims" var="activitytype_415,tt_to" coeff="-.18287555" interaction="True" repeat="tt_to"/>
        <Variable table="locations" var="retail_employment" coeff=".00045979" repeat="retail_employment"/>
        <Variable table="locations" var="total_area" coeff=".05192972" repeat="total_area"/>
        <Variable table="households,travel_skims" var="inclt35k,tt_to" coeff="-.06092847" interaction="True" repeat="tt_to"/>
        <Variable table="locations" var="low_income" coeff="-.00093146" repeat="low_income"/>
        <Variable table="locations" var="high_income" coeff=".00165003" repeat="high_income"/>
        <Variable table="households,travel_skims" var="rur,tt_to" coeff="-.09980193" interaction="True" repeat="tt_to"/>
        <Variable table="runtime" var="other_employment_density" coeff=".00008159" repeat="other_employment_density"/>
        <Variable table="runtime" var="retail_employment_density" coeff=" -.00016987" repeat="retail_employment_density"/>
        <Variable table="runtime" var="office_employment_density" coeff="-.00002314" repeat="office_employment_density"/>
        <Variable table="persons,travel_skims" var="agge15,tt_to" coeff="-.06024264" interaction="True" repeat="tt_to"/>
        <Variable table="households,travel_skims" var="noc,tt_to" coeff=".00012078" interaction="True" repeat="tt_to"/>
      </Model>

      <DynamicSpatialConstraints table="travel_skims" skim_var="tt" as_var="tt_to_loc" origin_var="origin" destination_var="destination" after_model="locationid" before_model="tt_to_loc">
	<Start table="households" location_var="st_locationid"/>
	<End table="runtime" location_var="locationid"/>
      </DynamicSpatialConstraints>

      <DynamicSpatialConstraints table="travel_skims" skim_var="tt" as_var="tt_from_loc" origin_var="origin" destination_var="destination" after_model="locationid" before_model="tt_to_loc">
	<Start table="households" location_var="locationid"/>
	<End table="runtime" location_var="en_locationid"/>
      </DynamicSpatialConstraints>

      <DynamicSpatialConstraints1 table="travel_skims" skim_var="tt" as_var="tt_from_home" origin_var="origin" destination_var="destination" after_model="locationid" before_model="tt_from">
	<Start table="households" location_var="htaz"/>
	<End table="runtime" location_var="en_locationid"/>
      </DynamicSpatialConstraints1>

      <DynamicSpatialConstraints1 table="travel_skims" skim_var="tt" as_var="tt_home" origin_var="origin" destination_var="destination" after_model="locationid" before_model="tt_from">
	<Start table="runtime" location_var="st_locationid"/>
	<End table="households" location_var="htaz"/>
      </DynamicSpatialConstraints1>

      <DynamicSpatialConstraints1 table="travel_skims" skim_var="tt" as_var="tt_work" origin_var="origin" destination_var="destination" after_model="locationid" before_model="tt_from">
	<Start table="runtime" location_var="st_locationid"/>
	<End table="persons" location_var="wtaz"/>
      </DynamicSpatialConstraints1>

      <Model name="TT To IH Episodes Recode" formulation="Regression" type="Linear" seed="1">
 	<DependentVariable var="tt_to_loc"/>
	<FilterSet type="and"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
 	<Filter table="runtime" var="st_activitytype" condition="greater than equals" value="100"/>
 	<Filter table="runtime" var="st_activitytype" condition="less than equals" value="101"/>
 	<Filter table="runtime" var="activitytype" condition="equals" value="101"/>
 	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>

      <Model name="TT From IH To IH Episodes Recode" formulation="Regression" type="Linear" seed="1">
 	<DependentVariable var="tt_from_loc"/>
	<FilterSet type="and"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
 	<Filter table="runtime" var="activitytype" condition="equals" value="101"/>
 	<Filter table="runtime" var="en_activitytype" condition="greater than equals" value="100"/>
 	<Filter table="runtime" var="en_activitytype" condition="less than equals" value="101"/>
 	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>


      <Model name="StartTime" formulation="Regression" type="Linear" seed="1">
 	<DependentVariable var="starttime"/>
	<FilterSet type="and"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
 	<Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="1"/>
        <Variable table="runtime" var="tt_to_loc" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>


      <Model1 name="TT From" formulation="Regression" type="Linear" seed="1">
 	<DependentVariable var="tt_from"/>
	<FilterSet type="and"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
	<Filter table="runtime" var="locationid" condition="equals" valuetable="households" valuevar="htaz"/>
 	<Variance value="0"/>
        <Variable table="runtime" var="tt_from_home" coeff="1"/>
      </Model1>

      <Model1 name="StartTimeIHActs" formulation="Regression" type="Linear" seed="1">
 	<DependentVariable var="starttime"/>
	<FilterSet type="and"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
	<Filter table="runtime" var="st_locationid" condition="equals" valuetable="households" valuevar="htaz"/>
	<Filter table="runtime" var="locationid" condition="equals" valuetable="households" valuevar="htaz"/>
 	<Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model1>


      <Model1 name="StartTimeIHActs" formulation="Regression" type="Linear" seed="1">
 	<DependentVariable var="starttime"/>
	<FilterSet type="and"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
	<Filter table="runtime" var="st_locationid" condition="equals" valuetable="households" valuevar="htaz"/>
	<Filter table="runtime" var="locationid" condition="equals" valuetable="households" valuevar="htaz"/>
	<Filter table="runtime" var="activitytype" condition="greater than" value="400"/>
 	<Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="1"/>
        <Variable table="runtime" var="tt_to" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model1>


      <Model1 name="StartTimeIHActs" formulation="Regression" type="Linear" seed="1">
 	<DependentVariable var="starttime"/>
	<FilterSet type="and"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
	<Filter table="runtime" var="st_locationid" condition="equals" valuetable="households" valuevar="htaz"/>
	<Filter table="runtime" var="locationid" condition="not equals" valuetable="households" valuevar="htaz"/>
 	<Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="1"/>
        <Variable table="travel_skims" var="tt_to" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model1>


      <Model1 name="StartTimeOHActs" formulation="Regression" type="Linear" seed="1">
 	<DependentVariable var="starttime"/>
	<FilterSet type="and"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
	<Filter table="runtime" var="st_locationid" condition="not equals" valuetable="households" valuevar="htaz"/>
	<Filter table="runtime" var="locationid" condition="not equals" valuetable="households" valuevar="htaz"/>
 	<Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="1"/>
        <Variable table="travel_skims" var="tt_to" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model1>

      <Model1 name="StartTimeOHActs" formulation="Regression" type="Linear" seed="1">
 	<DependentVariable var="starttime"/>
	<FilterSet type="and"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
	<Filter table="runtime" var="st_locationid" condition="not equals" valuetable="households" valuevar="htaz"/>
	<Filter table="runtime" var="locationid" condition="equals" valuetable="households" valuevar="htaz"/>
 	<Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="1"/>
        <Variable table="travel_skims" var="tt_home" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model1>


      <Model name="EndTime" formulation="Regression" type="Linear" seed="1">
 	<DependentVariable var="endtime"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
 	<Variance value="0"/>
        <Variable table="runtime" var="starttime" coeff="1"/>
        <Variable table="runtime" var="duration" coeff="1"/>
      </Model>

      <Model name="TripCount" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tripcount"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="Dependentpersonid" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="dependentpersonid"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="TempPrismDurationVar" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="prismduration"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_starttime" coeff="1"/>
        <Variable table="runtime" var="st_endtime" coeff="-1"/>
        <Variable table="standard" var="one" coeff="-1"/>
      </Model>

      <Model name="TempActivityTravelEnd" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="activitytravelend"/>
	<FilterSet type="and"/>
 	<Filter table="persons" var="age" condition="less than" value="18"/>
	<Filter table="child_dependency_r" var="dependency" condition="equals" value="1"/>
	<Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="tt_from_loc" coeff="1"/>
        <Variable table="standard" var="one" coeff="-1"/>
      </Model>

    </SubComponent>
    </ComponentList>


    <Component name="AdjustPenultimateEpisode" read_from_table="schedule_allocterm_r" write_to_table="schedule_childrenlastprismadj_r" key="houseid,personid" location="True" skip="False" completed="True">
      <DBTables>
    	<Table table="persons" key="houseid,personid" order="1"/>
    	<Table table="daily_work_status_r" key="houseid,personid"/>
    	<Table table="daily_school_status_r" key="houseid,personid"/>		
    	<Table table="child_dependency_r" key="houseid,personid"/>
    	<Table table="schedule_allocterm_r" key="houseid,personid"/>
    	<Table table="schedule_childrenlastprismadj_r" key="houseid,personid"/>
      </DBTables>
      <DeleteRecords value="False"/>	
      <AnalysisInterval start="0" end="1440" step="1"/>

      <SpatialConstraints table="travel_skims" skim_var="tt" as_var="tt_to" origin_var="origin" destination_var="destination">
	<Start table="schedule_allocterm_r" location_var="locationid" time_var="endtime"/>
	<End table="schedule_allocterm_r" location_var="locationid" time_var="starttime"/>
      </SpatialConstraints>

      <ConsistencyChecks name="DynamicNonMandatoryChecks">
	<Filter table="runtime" var="starttime" condition="less than equals" valuetable="runtime" valuevar="endtime"/>
      </ConsistencyChecks>


      <Model name="FirstActivityType" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="activitytype"/>
	<Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_activitytype" coeff="1"/>
      </Model>
      <Model name="FirstLocationID" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="locationid"/>
	<Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_locationid" coeff="1"/>
      </Model>
      <Model name="Firststarttime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="starttime"/>
	<Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_starttime" coeff="1"/>
      </Model>
      <Model name="FirstEndtime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="endtime"/>
	<Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_endtime" coeff="1"/>
      </Model>
      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="duration"/>
	<Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
	<Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="FirstDependentPersonId" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="dependentpersonid"/>
	<Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_dependentpersonid" coeff="1"/>
      </Model>

      <Model name="FirstTripCount" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tripcount"/>
	<Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_tripcount" coeff="1"/>
      </Model>
      <Model name="FirstScheduleId" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="scheduleid"/>
	<Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_scheduleid" coeff="1"/>
      </Model>
      <Model name="RepeatConditionVariableForEndVertex" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="repeat"/>
	<FilterSet type="or"/>
	<Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>



      <Model name="RepeatConditionVariableForEndVertex" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="repeat"/>
	<FilterSet type="or"/>
	<Filter table="runtime" var="en_endtime" condition="less than" value="1439"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="2"/>
      </Model>






      <Model name="PrismDuration" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="prismdur"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="-1"/>
        <Variable table="runtime" var="en_starttime" coeff="1"/>
      </Model>
      <Model name="SecondActivityType" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="activitytype"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_activitytype" coeff="1"/>
      </Model>
      <Model name="SecondLocationID" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="locationid"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_locationid" coeff="1"/>
      </Model>

      <DynamicSpatialConstraints table="travel_skims" skim_var="tt" as_var="tt_to" origin_var="origin" destination_var="destination" after_model="locationid" before_model="tt_to">
	<Start table="runtime" location_var="st_locationid"/>
	<End table="runtime" location_var="en_locationid"/>
      </DynamicSpatialConstraints>


      <Model name="TravelTimeRecode" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tt_to"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="st_activitytype" condition="less than" value="200"/>
	<Filter table="runtime" var="st_locationid" condition="equals" valuetable="runtime" valuevar="en_locationid"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>

      <Model name="Adjustment" formulation="Regression" type="Linear" seed="1">
	<!-- Model Description: Array based implementation; recode the adjustment calculated in previous model to avoid adjusting dependent person activities ... -->
	<!-- Filter Description: Only adjust the last prism/last activity of dependent children -->
	<DependentVariable var="adjustment"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<Filter1 table="runtime" var="prismdur" condition="less than" valuetable="runtime" valuevar="tt_to"/> 
	<Filter table="child_dependency_r" var="dependency" condition="equals" value="0"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable1 table="runtime" var="prismdur" coeff="-1"/>
        <Variable1 table="runtime" var="tt_to" coeff="1"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>

      <Model name="Adjustment" formulation="Regression" type="Linear" seed="1">
	<!-- Model Description: Array based implementation; calculate adjustment to fill the last unfilled prism of dependent children... -->
	<!-- Filter Description: Only adjust the last prism/last activity of dependent children  when the size of the prism is greater than the travel time to next episode-->
	<DependentVariable var="adjustment"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<Filter table="child_dependency_r" var="dependency" condition="equals" value="1"/>
	<Filter table="runtime" var="prismdur" condition="greater than" valuetable="runtime" valuevar="tt_to"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="prismdur" coeff="-1"/>
        <Variable table="runtime" var="tt_to" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>

      <Model name="Adjustment" formulation="Regression" type="Linear" seed="1">
	<!-- Model Description: Array based implementation; calculate adjustment to fill the last unfilled prism of dependent children... -->
	<!-- Filter Description: Only adjust the last prism/last activity of dependent children  when the size of the prism is greater than the travel time to next episode-->
	<DependentVariable var="adjustment"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<Filter table="child_dependency_r" var="dependency" condition="equals" value="1"/>
	<Filter table="runtime" var="prismdur" condition="less than equals" valuetable="runtime" valuevar="tt_to"/>
	<Filter table="runtime" var="st_activitytype" condition="equals" value="300"/>
	<Filter table="runtime" var="en_activitytype" condition="equals" value="100"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="prismdur" coeff="-1"/>
        <Variable table="runtime" var="tt_to" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>



      <Model name="EndTime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="endtime"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="1"/>
      </Model>

      <Model1 name="RecEndTime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="endtime"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<Filter table="runtime" var="prismdur" condition="less than" valuetable="runtime" valuevar="tt_to"/>
	<Filter table="child_dependency_r" var="dependency" condition="equals" value="0"/>
	<Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="adjustment" coeff="-1"/>
      </Model1>


      <Model name="RecEndTime" formulation="Regression" type="Linear" seed="1">
	<!-- Model Description: Array based implementation; recode endtime and add the adjustment ... -->
	<!-- Filter Description: Only adjust the last prism/last activity of dependent children-->
	<DependentVariable var="endtime"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<Filter table="child_dependency_r" var="dependency" condition="equals" value="1"/>
	<Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="adjustment" coeff="-1"/>
      </Model>



      <Model name="Startime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="starttime"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_starttime" coeff="1"/>
      </Model>

      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="duration"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>


      <Model name="ScheduleId" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="scheduleid"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_scheduleid" coeff="1"/>
      </Model>
      <Model name="TripCount" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tripcount"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_tripcount" coeff="1"/>
      </Model>
      <Model name="DependentPersonId" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="dependentpersonid"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_dependentpersonid" coeff="1"/>
      </Model>


      <Model name="UpdateRepeat" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="repeat"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="repeat" condition="less than equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
        <Variable table="runtime" var="repeat" coeff="1"/>
        <Variable table="persons" var="age" coeff="0"/>  	<!-- Dummy variable to call the persons table ... -->
      </Model>


     
    </Component>	


    <Component name="InsertAppropriateTravelEpisodes" read_from_table="schedule_childrenlastprismadj_r" write_to_table="schedule_childreninctravelrec_r" key="houseid,personid" location="True" skip="False" completed="True">
      <DBTables>
    	<Table table="persons" key="houseid,personid" order="1"/>
    	<Table table="daily_work_status_r" key="houseid,personid"/>
    	<Table table="daily_school_status_r" key="houseid,personid"/>		
    	<Table table="child_dependency_r" key="houseid,personid"/>
    	<Table table="schedule_childrenlastprismadj_r" key="houseid,personid"/>
    	<Table table="schedule_childreninctravelrec_r" key="houseid,personid"/>
      </DBTables>
      <DeleteRecords value="False"/>	
      <AnalysisInterval start="0" end="1440" step="1"/>

      <SpatialConstraints table="travel_skims" skim_var="tt" as_var="tt_to" origin_var="origin" destination_var="destination">
	<Start table="schedule_childrenlastprismadj_r" location_var="locationid" time_var="endtime"/>
	<End table="schedule_childrenlastprismadj_r" location_var="locationid" time_var="starttime"/>
      </SpatialConstraints>

      <ConsistencyChecks name="DynamicNonMandatoryChecks">
	<Filter table="runtime" var="starttime" condition="less than equals" valuetable="runtime" valuevar="endtime"/>
      </ConsistencyChecks>


      <Model name="FirstActivityType" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="activitytype"/>
	<Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_activitytype" coeff="1"/>
      </Model>
      <Model name="FirstLocationID" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="locationid"/>
	<Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_locationid" coeff="1"/>
      </Model>
      <Model name="Firststarttime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="starttime"/>
	<Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_starttime" coeff="1"/>
      </Model>
      <Model name="FirstEndtime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="endtime"/>
	<Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="1"/>
      </Model>
      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="duration"/>
	<Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
	<Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="FirstTripcount" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tripcount"/>
	<Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_tripcount" coeff="1"/>
      </Model>
      <Model name="FirstDependentPersonId" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="dependentpersonid"/>
	<Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_dependentpersonid" coeff="1"/>
      </Model>
      <Model name="ScheduleId" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="scheduleid"/>
	<Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_scheduleid" coeff="1"/>
      </Model>
      <Model name="RepeatConditionVariableForEndVertex" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="repeat"/>
	<FilterSet type="or"/>
	<Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>




      <Model name="RepeatConditionVariableForEndVertex" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="repeat"/>
	<FilterSet type="or"/>
	<Filter table="runtime" var="st_starttime" condition="greater than" value="0"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="2"/>
      </Model>






      <Model name="PrismDuration" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="prismdur"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="-1"/>
        <Variable table="runtime" var="en_starttime" coeff="1"/>
      </Model>
      <Model name="SecondActivityType" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="activitytype"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_activitytype" coeff="1"/>
      </Model>
      <Model name="SecondLocationID" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="locationid"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_locationid" coeff="1"/>
      </Model>

      <DynamicSpatialConstraints table="travel_skims" skim_var="tt" as_var="tt_to" origin_var="origin" destination_var="destination" after_model="locationid" before_model="tt_to">
	<Start table="runtime" location_var="st_locationid"/>
	<End table="runtime" location_var="en_locationid"/>
      </DynamicSpatialConstraints>


      <Model name="TravelTimeRecode" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tt_to"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="st_activitytype" condition="less than" value="200"/>
	<Filter table="runtime" var="en_activitytype" condition="less than" value="200"/>
	<Filter table="runtime" var="st_locationid" condition="equals" valuetable="runtime" valuevar="en_locationid"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>

      <Model name="Adjustment" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="adjustment"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<Filter table="runtime" var="prismdur" condition="less than" valuetable="runtime" valuevar="tt_to"/>
	<Filter table="child_dependency_r" var="dependency" condition="equals" value="0"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="prismdur" coeff="-1"/>
        <Variable table="runtime" var="tt_to" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>

      <Model name="Adjustment" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="adjustment"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<Filter table="child_dependency_r" var="dependency" condition="equals" value="1"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="prismdur" coeff="-1"/>
        <Variable table="runtime" var="tt_to" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>

      <Model name="RecStartTime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="starttime"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_starttime" coeff="1"/>
      </Model>

      <Model name="RecStartTime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="starttime"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<Filter table="runtime" var="prismdur" condition="less than" valuetable="runtime" valuevar="tt_to"/>
	<Filter table="child_dependency_r" var="dependency" condition="equals" value="0"/>
	<Filter table="runtime" var="en_endtime" condition="not equals" value="1439"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="starttime" coeff="1"/>
        <Variable table="runtime" var="adjustment" coeff="1"/>
      </Model>


      <Model name="RecStartTime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="starttime"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<Filter table="child_dependency_r" var="dependency" condition="equals" value="1"/>
	<Filter table="runtime" var="en_endtime" condition="not equals" value="1439"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="starttime" coeff="1"/>
        <Variable table="runtime" var="adjustment" coeff="1"/>
      </Model>

      <Model name="RecodeStartTime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <Filter table="runtime" var="starttime" condition="greater than equals" value="1439"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1438"/>
      </Model>


      <Model name="SecondEndtime" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="endtime"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_endtime" coeff="1"/>
      </Model>

      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="duration"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>


      <Model name="ScheduleId" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="scheduleid"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_scheduleid" coeff="1"/>
      </Model>
      <Model name="FirstTripCount" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="tripcount"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_tripcount" coeff="1"/>
      </Model>
      <Model name="FirstDependentPersonId" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="dependentpersonid"/>
	<Filter table="runtime" var="repeat" condition="equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="runtime" var="en_dependentpersonid" coeff="1"/>
      </Model>


      <Model name="UpdateRepeat" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="repeat"/>
	<FilterSet type="and"/>
	<Filter table="runtime" var="repeat" condition="less than equals" value="2"/>
	<RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
        <Variable table="runtime" var="repeat" coeff="1"/>
        <Variable table="persons" var="age" coeff="0"/>  	<!-- Dummy variable to call the persons table ... -->
      </Model>


     
    </Component>	


    <Component name="CleanAggregateActivitySchedule" read_from_table="schedule_childreninctravelrec_r" write_to_table="schedule_cleanaggregateactivityschedule_r" key="houseid,personid" location="True" skip="False" completed="True">
      <DBTables>
    	<Table table="daily_work_status_r" key="houseid,personid"/>
    	<Table table="daily_school_status_r" key="houseid,personid"/>		
    	<Table table="child_dependency_r" key="houseid,personid"/>
    	<Table table="schedule_childreninctravelrec_r" key="houseid,personid" order="1"/>
    	<Table table="schedule_cleanaggregateactivityschedule_r" key="houseid,personid"/>
      </DBTables>

      <DeleteRecords value="False"/>	


      <Model name="CleanFixedActivitySchedulesofChildren" formulation="Clean Aggregate Activity Schedule" seed="1">
	<DependentVariable var="cleanfixedactivityschedulesofchildren"/>

	<ActivityAttributes>
	  <HouseholdIdName table="schedule_childreninctravelrec_r" var="houseid"/>
	  <PersonIdName table="schedule_childreninctravelrec_r" var="personid"/>
	  <ScheduleIdName table="schedule_childreninctravelrec_r" var="scheduleid"/>
	  <ActivityTypeName table="schedule_childreninctravelrec_r" var="activitytype"/>
	  <LocationIdName table="schedule_childreninctravelrec_r" var="locationid"/>
	  <StartTimeName table="schedule_childreninctravelrec_r" var="starttime"/>
	  <EndTimeName table="schedule_childreninctravelrec_r" var="endtime"/>
	  <DurationName table="schedule_childreninctravelrec_r" var="duration"/>
	  <DependentPersonName table="schedule_childreninctravelrec_r" var="dependentpersonid"/>
	  <TripCountName table="schedule_childreninctravelrec_r" var="tripcount"/>
	</ActivityAttributes>

	<DailyStatus>
	  <DailySchoolStatus table="daily_school_status_r" var="schdailystatus"/>
	  <DailyWorkStatus table="daily_work_status_r" var="wrkdailystatus"/>
	</DailyStatus>
	
	<Dependency>
	  <ChildDependency table="child_dependency_r" var="dependency"/>
	</Dependency>

      </Model>

     
    </Component>	



    <Component name="ChildDependencyAllocation" read_from_table="schedule_cleanaggregateactivityschedule_r" write_to_table="schedule_dailyallocrec_r" key="houseid,personid" count_key="scheduleid" location="True" skip="False" completed="True">
      <DBTables>
    	<Table table="daily_work_status_r" key="houseid,personid"/>
    	<Table table="daily_school_status_r" key="houseid,personid"/>		
    	<Table table="child_dependency_r" key="houseid,personid"/>
    	<Table table="schedule_cleanaggregateactivityschedule_r" key="houseid,personid" count_key="scheduleid" order="1"/>
    	<Table table="schedule_dailyallocrec_r" key="houseid,personid"/>
    	<Table table="schedule_joint_dailyallocrec_r" key="houseid,personid"/>
      </DBTables>

      <DeleteRecords value="False"/>	



      <Model name="ChildDependencyAllocation" formulation="Child Dependency" type="Allocation" seed="1">
	<DependentVariable var="childdependencyallocation"/>
	<ActivityAttributes>
	  <HouseholdIdName table="schedule_cleanaggregateactivityschedule_r" var="houseid"/>
	  <PersonIdName table="schedule_cleanaggregateactivityschedule_r" var="personid"/>
	  <ScheduleIdName table="schedule_cleanaggregateactivityschedule_r" var="scheduleid"/>
	  <ActivityTypeName table="schedule_cleanaggregateactivityschedule_r" var="activitytype"/>
	  <LocationIdName table="schedule_cleanaggregateactivityschedule_r" var="locationid"/>
	  <StartTimeName table="schedule_cleanaggregateactivityschedule_r" var="starttime"/>
	  <EndTimeName table="schedule_cleanaggregateactivityschedule_r" var="endtime"/>
	  <DurationName table="schedule_cleanaggregateactivityschedule_r" var="duration"/>
	  <DependentPersonName table="schedule_cleanaggregateactivityschedule_r" var="dependentpersonid"/>
	  <TripCountName table="schedule_cleanaggregateactivityschedule_r" var="tripcount"/>
	</ActivityAttributes>

	<DailyStatus>
	  <DailySchoolStatus table="daily_school_status_r" var="schdailystatus"/>
	  <DailyWorkStatus table="daily_work_status_r" var="wrkdailystatus"/>
	</DailyStatus>
	
	<Dependency>
	  <ChildDependency table="child_dependency_r" var="dependency"/>
	</Dependency>

      </Model>

     
   </Component>	


    <Component name="FinalReconciliationOfActivityTravelStartAdj" read_from_table="schedule_dailyallocrec_r" write_to_table="schedule_inctravelrec_r" key="houseid,personid" location="True" skip="False" completed="True">
      <DBTables>
        <Table table="persons" key="houseid,personid" order="1"/>
        <Table table="daily_work_status_r" key="houseid,personid"/>
        <Table table="daily_school_status_r" key="houseid,personid"/>
        <Table table="child_dependency_r" key="houseid,personid"/>
        <Table table="schedule_dailyallocrec_r" key="houseid,personid"/>
        <Table table="schedule_inctravelrec_r" key="houseid,personid"/>
      </DBTables>
      <DeleteRecords value="False"/>
      <AnalysisInterval start="0" end="1440" step="1"/>
      <SpatialConstraints table="travel_skims" skim_var="tt" as_var="tt_to" origin_var="origin" destination_var="destination">
        <Start table="schedule_dailyallocrec_r" location_var="locationid" time_var="endtime"/>
        <End table="schedule_dailyallocrec_r" location_var="locationid" time_var="starttime"/>
      </SpatialConstraints>
      <ConsistencyChecks name="DynamicNonMandatoryChecks">
        <Filter1 table="runtime" var="starttime" condition="less than equals" valuetable="runtime" valuevar="endtime"/>
        <Filter table="runtime" var="duration" condition="greater than equals" value="1"/>
      </ConsistencyChecks>
      <Model name="FirstActivityType" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="activitytype"/>
        <Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_activitytype" coeff="1"/>
      </Model>
      <Model name="FirstLocationID" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="locationid"/>
        <Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_locationid" coeff="1"/>
      </Model>
      <Model name="Firststarttime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="starttime"/>
        <Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_starttime" coeff="1"/>
      </Model>
      <Model name="FirstEndtime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="endtime"/>
        <Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="1"/>
      </Model>
      <Model name="FirstDuration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="duration"/>
        <Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
        <Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="FirstTripCount" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tripcount"/>
        <Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_tripcount" coeff="1"/>
      </Model>
      <Model name="FirstDependentPersonid" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="dependentpersonid"/>
        <Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_dependentpersonid" coeff="1"/>
      </Model>
      <Model name="FirstScheduleId" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="scheduleid"/>
        <Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_scheduleid" coeff="1"/>
      </Model>
      <Model name="RepeatConditionVariableForEndVertex" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="repeat"/>
        <FilterSet type="or"/>
        <Filter table="runtime" var="st_starttime" condition="equals" value="0"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="RepeatConditionVariableForEndVertex" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="repeat"/>
        <FilterSet type="or"/>
        <Filter table="runtime" var="st_starttime" condition="greater than" value="0"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="2"/>
      </Model>
      <Model name="PrismDuration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="prismdur"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="-1"/>
        <Variable table="runtime" var="en_starttime" coeff="1"/>
      </Model>
      <Model name="SecondActivityType" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="activitytype"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_activitytype" coeff="1"/>
      </Model>
      <Model name="SecondLocationID" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="locationid"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_locationid" coeff="1"/>
      </Model>
      <DynamicSpatialConstraints table="travel_skims" skim_var="tt" as_var="tt_to" origin_var="origin" destination_var="destination" after_model="locationid" before_model="tt_to">
        <Start table="runtime" location_var="st_locationid"/>
        <End table="runtime" location_var="en_locationid"/>
      </DynamicSpatialConstraints>
      <Model name="TravelTimeRecode" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tt_to"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="st_activitytype" condition="less than" value="200"/>
        <Filter table="runtime" var="en_activitytype" condition="less than" value="200"/>
        <Filter table="runtime" var="st_locationid" condition="equals" valuetable="runtime" valuevar="en_locationid"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="Adjustment" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="prismdur" coeff="-1"/>
        <Variable table="runtime" var="tt_to" coeff="1"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="AdjustmentRecode" formulation="Regression" type="Linear" seed="1">
	<!-- Model Description: Array based implementation; recode the adjustment calculated in previous model to avoid adjusting dependent person activities ... -->
	<!-- Filter Description: When travel time to next activity is less than the size of the prism then do not adjust the start time of subsequent activity -->
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="tt_to" condition="less than equals" valuetable="runtime" valuevar="prismdur"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="AdjustmentRecode" formulation="Regression" type="Linear" seed="1">
	<!-- Model Description: Array based implementation; recode the adjustment calculated in previous model to avoid adjusting dependent person activities ... -->
	<!-- Filter Description: When the activity downstream is a dependent person serve passenger type activity do not adjust the start time of end activity -->
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="en_activitytype" condition="greater than equals" value="600"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="AdjustmentRecode" formulation="Regression" type="Linear" seed="1">
	<!-- Model Description: Array based implementation; recode the adjustment calculated in previous model to avoid adjusting dependent person activities ... -->
	<!-- Filter Description: When the start activity is pickup and the location of the end activity is same as that of first then do not adjust the start time of end activity -->
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="st_activitytype" condition="greater than equals" value="600"/>
        <Filter table="runtime" var="st_locationid" condition="equals" valuetable="runtime" valuevar="en_locationid"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="AdjustmentRecode" formulation="Regression" type="Linear" seed="1">
	<!-- Model Description: Array based implementation; recode the adjustment calculated in previous model to avoid adjusting dependent person activities ... -->
	<!-- Filter Description: When the end activity is a dependent activity then do not move the start of the activity -->
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="en_dependentpersonid" condition="greater than" value="0"/>
        <Filter table="runtime" var="adjustment" condition="greater than" value="0"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="RecStartTime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_starttime" coeff="1"/>
      </Model>
      <Model name="RecStartTime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="starttime"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="starttime" coeff="1"/>
        <Variable table="runtime" var="adjustment" coeff="1"/>
      </Model>
      <Model name="SecondEndtime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="endtime"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_endtime" coeff="1"/>
      </Model>
      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="duration"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="ScheduleId" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="scheduleid"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_scheduleid" coeff="1"/>
      </Model>
      <Model name="EndEpisodeTripCount" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tripcount"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_tripcount" coeff="1"/>
      </Model>
      <Model name="EndEpisodeDependentPersonId" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="dependentpersonid"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_dependentpersonid" coeff="1"/>
      </Model>
      <Model name="UpdateRepeat" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="repeat"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="repeat" condition="less than equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
        <Variable table="runtime" var="repeat" coeff="1"/>
        <Variable table="persons" var="age" coeff="0"/>  	<!-- Dummy variable to call the persons table ... -->
      </Model>
    </Component>
    <Component name="FinalReconciliationOfActivityTravelEndAdj" read_from_table="schedule_inctravelrec_r" write_to_table="schedule_skeleton_r" key="houseid,personid" location="True" skip="False" completed="True">
      <DBTables>
        <Table table="persons" key="houseid,personid" order="1"/>
        <Table table="daily_work_status_r" key="houseid,personid"/>
        <Table table="daily_school_status_r" key="houseid,personid"/>
        <Table table="child_dependency_r" key="houseid,personid"/>
        <Table table="schedule_inctravelrec_r" key="houseid,personid"/>
        <Table table="schedule_skeleton_r" key="houseid,personid"/>
      </DBTables>
      <DeleteRecords value="False"/>
      <AnalysisInterval start="0" end="1440" step="1"/>
      <SpatialConstraints table="travel_skims" skim_var="tt" as_var="tt_to" origin_var="origin" destination_var="destination">
        <Start table="schedule_inctravelrec_r" location_var="locationid" time_var="endtime"/>
        <End table="schedule_inctravelrec_r" location_var="locationid" time_var="starttime"/>
      </SpatialConstraints>
      <ConsistencyChecks name="DynamicNonMandatoryChecks">
        <Filter1 table="runtime" var="starttime" condition="less than equals" valuetable="runtime" valuevar="endtime"/>
        <Filter table="runtime" var="duration" condition="greater than equals" value="1"/>
      </ConsistencyChecks>
      <Model name="EndActivityType" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="activitytype"/>
        <Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_activitytype" coeff="1"/>
      </Model>
      <Model name="EndLocationID" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="locationid"/>
        <Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_locationid" coeff="1"/>
      </Model>
      <Model name="Endstarttime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="starttime"/>
        <Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_starttime" coeff="1"/>
      </Model>
      <Model name="EndEndtime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="endtime"/>
        <Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_endtime" coeff="1"/>
      </Model>
      <Model name="EndDuration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="duration"/>
        <Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
        <Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="EndScheduleId" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="scheduleid"/>
        <Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_scheduleid" coeff="1"/>
      </Model>
      <Model name="EndEpisodeTripCount" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tripcount"/>
        <Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_tripcount" coeff="1"/>
      </Model>
      <Model name="EndEpisodeDependentPersonId" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="dependentpersonid"/>
        <Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
        <Variance value="0"/>
        <Variable table="runtime" var="en_dependentpersonid" coeff="1"/>
      </Model>
      <Model name="RepeatConditionVariableForEndVertex" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="repeat"/>
        <FilterSet type="or"/>
        <Filter table="runtime" var="en_endtime" condition="equals" value="1439"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="RepeatConditionVariableForStartVertex" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="repeat"/>
        <FilterSet type="or"/>
        <Filter table="runtime" var="en_endtime" condition="less than" value="1439"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="2"/>
      </Model>
      <Model name="PrismDuration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="prismdur"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="-1"/>
        <Variable table="runtime" var="en_starttime" coeff="1"/>
      </Model>
      <Model name="SecondActivityType" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="activitytype"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_activitytype" coeff="1"/>
      </Model>
      <Model name="SecondLocationID" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="locationid"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_locationid" coeff="1"/>
      </Model>
      <DynamicSpatialConstraints table="travel_skims" skim_var="tt" as_var="tt_to" origin_var="origin" destination_var="destination" after_model="locationid" before_model="tt_to">
        <Start table="runtime" location_var="st_locationid"/>
        <End table="runtime" location_var="en_locationid"/>
      </DynamicSpatialConstraints>
      <Model name="TravelTimeRecode" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tt_to"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="st_activitytype" condition="less than" value="200"/>
        <Filter table="runtime" var="st_locationid" condition="equals" valuetable="runtime" valuevar="en_locationid"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="Adjustment" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="prismdur" coeff="-1"/>
        <Variable table="runtime" var="tt_to" coeff="1"/>
        <Variable1 table="standard" var="one" coeff="1"/>
      </Model>
      <Model name="AdjustmentRecode" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="tt_to" condition="less than equals" valuetable="runtime" valuevar="prismdur"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model1 name="AdjustmentRecode" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="adjustment" condition="less than equals" value="1"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model1>
      <Model name="AdjustmentRecode" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="st_activitytype" condition="greater than equals" value="600"/>
        <Filter table="runtime" var="en_activitytype" condition="greater than equals" value="600"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="AdjustmentRecode" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="st_activitytype" condition="greater than equals" value="600"/>
        <Filter table="runtime" var="st_locationid" condition="equals" valuetable="runtime" valuevar="en_locationid"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="AdjustmentRecode" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="en_activitytype" condition="greater than equals" value="600"/>
        <Filter table="runtime" var="st_activitytype" condition="greater than equals" value="200"/>
        <Filter table="runtime" var="st_locationid" condition="equals" valuetable="runtime" valuevar="en_locationid"/>
        <Filter table="runtime" var="adjustment" condition="greater than" value="0"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="AdjustmentRecode" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="st_activitytype" condition="greater than equals" value="600"/>
        <Filter table="runtime" var="adjustment" condition="greater than" valuetable="runtime" valuevar="st_duration"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="AdjustmentRecode" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="st_locationid" condition="equals" valuetable="runtime" valuevar="en_locationid"/>
        <Filter table="runtime" var="st_activitytype" condition="less than" value="200"/>
        <Filter table="runtime" var="st_activitytype" condition="greater than equals" value="100"/>
        <Filter table="runtime" var="en_activitytype" condition="less than equals" value="599"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="AdjustmentRecode" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="adjustment"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="st_dependentpersonid" condition="greater than" value="0"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>
      <Model name="RecEndTime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="endtime"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_endtime" coeff="1"/>
      </Model>
      <Model name="RecEndTime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="endtime"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="adjustment" coeff="-1"/>
      </Model>
      <Model name="Starttime" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="starttime"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_starttime" coeff="1"/>
      </Model>
      <Model name="Duration" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="duration"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="endtime" coeff="1"/>
        <Variable table="runtime" var="starttime" coeff="-1"/>
      </Model>
      <Model name="ScheduleId" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="scheduleid"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_scheduleid" coeff="1"/>
      </Model>
      <Model name="EndEpisodeTripCount" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="tripcount"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_tripcount" coeff="1"/>
      </Model>
      <Model name="EndEpisodeDependentPersonId" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="dependentpersonid"/>
        <Filter table="runtime" var="repeat" condition="equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="runtime" var="st_dependentpersonid" coeff="1"/>
      </Model>
      <Model name="UpdateRepeat" formulation="Regression" type="Linear" seed="1">
        <DependentVariable var="repeat"/>
        <FilterSet type="and"/>
        <Filter table="runtime" var="repeat" condition="less than equals" value="2"/>
        <RunUntilCondition table="runtime" var="repeat" condition="less than equals" value="2"/>
        <Variance value="0"/>
        <Variable table="standard" var="one" coeff="1"/>
        <Variable table="runtime" var="repeat" coeff="1"/>
        <Variable table="persons" var="age" coeff="0"/>  	<!-- Dummy variable to call the persons table ... -->
      </Model>
    </Component>

    <Component name="PersonsLocation" read_from_table="persons" write_to_table="persons_location_r" skip="False" completed="True">
      <DBTables>
    	<Table table="persons" key="houseid,personid" order="1"/>
    	<Table table="households" key="houseid"/>
    	<Table table="persons_location_r" key="houseid,personid"/>
      </DBTables>

      <Model name="PersonUniqueId" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="personuniqueiddummy"/>
	<Variance value="0"/>
        <Variable table="persons" var="personuniqueid" coeff="1"/>
      </Model>


      <Model name="Time" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="time"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>


      <Model name="lastTripCount" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="lasttripcount"/>
	<Variance value="0"/>
        <Variable table="standard" var="one" coeff="0"/>
      </Model>

      <Model name="location" formulation="Regression" type="Linear" seed="1">
	<DependentVariable var="location"/>
	<Filter table="runtime" var="houseid" condition="greater than" value="0"/>
	<Variance value="0"/>
        <Variable table="households" var="htaz" coeff="1"/>
      </Model>
   </Component>


    <Component name="DummyCreator" read_from_table="schedule_skeleton_r" write_to_table="schedule_final_r" key="houseid,personid" location="True" skip="False" completed="True">
      <DBTables>
    	<Table table="daily_work_status_r" key="houseid,personid"/>
    	<Table table="daily_school_status_r" key="houseid,personid"/>		
    	<Table table="child_dependency_r" key="houseid,personid"/>
    	<Table table="schedule_skeleton_r" key="houseid,personid" order="1"/>
    	<Table table="schedule_final_r" key="houseid,personid"/>
      </DBTables>

      <Model name="ChildDependencyAllocation" formulation="Child Dependency" type="Dummy" seed="1">
	<DependentVariable var="childdependencyallocation"/>

	<ActivityAttributes>
	  <HouseholdIdName table="schedule_skeleton_r" var="houseid"/>
	  <PersonIdName table="schedule_skeleton_r" var="personid"/>
	  <ScheduleIdName table="schedule_skeleton_r" var="scheduleid"/>
	  <ActivityTypeName table="schedule_skeleton_r" var="activitytype"/>
	  <LocationIdName table="schedule_skeleton_r" var="locationid"/>
	  <StartTimeName table="schedule_skeleton_r" var="starttime"/>
	  <EndTimeName table="schedule_skeleton_r" var="endtime"/>
	  <DurationName table="schedule_skeleton_r" var="duration"/>
	  <DependentPersonName table="schedule_skeleton_r" var="dependentpersonid"/>
	  <TripCountName table="schedule_skeleton_r" var="tripcount"/>
	</ActivityAttributes>

	<DailyStatus>
	  <DailySchoolStatus table="daily_school_status_r" var="schdailystatus"/>
	  <DailyWorkStatus table="daily_work_status_r" var="wrkdailystatus"/>
	</DailyStatus>
	
	<Dependency>
	  <ChildDependency table="child_dependency_r" var="dependency"/>
	</Dependency>

      </Model>

     
   </Component>	






  </ModelConfig>
</ProjectConfig>
